(()=>{"use strict";var e={20:(e,t,n)=>{var a=n(609),r=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var a,l={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:l,_owner:i.current}}t.jsx=l,t.jsxs=l},848:(e,t,n)=>{e.exports=n(20)},609:e=>{e.exports=window.React}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=n(609);const r=window.wp.components,s=window.wp.domReady;var i=n.n(s);const o=window.wp.element,l=window.wp.apiFetch;var c=n.n(l);const d=window.wp.compose,u=window.wp.i18n,m=window.wp.url;var h={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function p(e){return`[nuqs] ${h[e]}\n  See https://err.47ng.com/NUQS-${e}`}var g=function(){try{if("undefined"==typeof localStorage)return!1;const e="nuqs-localStorage-test";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(e){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",e),!1}return(localStorage.getItem("debug")??"").includes("nuqs")}();function f(e,...t){if(!g)return;const n=function(e,...t){return e.replace(/%[sfdO]/g,(e=>{const n=t.shift();return"%O"===e&&n?JSON.stringify(n).replace(/"([^"]+)":/g,"$1:"):String(n)}))}(e,...t);performance.mark(n);try{console.log(e,...t)}catch(e){console.log(n)}}var y=(0,a.createContext)({useAdapter(){throw new Error(p(404))}});function _(e,t,n){try{return e(t)}catch(e){return function(e,...t){g&&console.warn(e,...t)}("[nuqs] Error while parsing value `%s`: %O"+(n?" (for key `%s`)":""),t,e,n),null}}y.displayName="NuqsAdapterContext",g&&"undefined"!=typeof window&&(window.__NuqsAdapterContext&&window.__NuqsAdapterContext!==y&&console.error(p(303)),window.__NuqsAdapterContext=y);var v=function(){if("undefined"==typeof window)return 50;if(!Boolean(window.GestureEvent))return 50;try{const e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),w=new Map,x={history:"replace",scroll:!1,shallow:!0,throttleMs:v},E=new Set,b=0,S=null;function I(){return new URLSearchParams(location.search)}function k({getSearchParamsSnapshot:e=I,updateUrl:t,rateLimitFactor:n=1}){return null===S&&(S=new Promise(((a,r)=>{if(!Number.isFinite(x.throttleMs))return f("[nuqs queue] Skipping flush due to throttleMs=Infinity"),a(e()),void setTimeout((()=>{S=null}),0);function s(){b=performance.now();const[n,s]=function({updateUrl:e,getSearchParamsSnapshot:t}){const n=t();if(0===w.size)return[n,null];const a=Array.from(w.entries()),r={...x},s=Array.from(E);w.clear(),E.clear(),x.history="replace",x.scroll=!1,x.shallow=!0,x.throttleMs=v,f("[nuqs queue] Flushing queue %O with options %O",a,r);for(const[e,t]of a)null===t?n.delete(e):n.set(e,t);try{return function(t){const a=s=>{if(s===t.length)return void e(n,{history:r.history,scroll:r.scroll,shallow:r.shallow});const i=t[s];if(!i)throw new Error("Invalid transition function");i((()=>a(s+1)))};a(0)}(s),[n,null]}catch(e){return console.error(p(429),a.map((([e])=>e)).join(),e),[n,e]}}({updateUrl:t,getSearchParamsSnapshot:e});null===s?a(n):r(n),S=null}setTimeout((function(){const e=performance.now()-b,t=x.throttleMs,a=n*Math.max(0,Math.min(t,t-e));f("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",a,t),0===a?s():setTimeout(s,a)}),0)}))),S}function M(e){return{all:e=e||new Map,on:function(t,n){var a=e.get(t);a?a.push(n):e.set(t,[n])},off:function(t,n){var a=e.get(t);a&&(n?a.splice(a.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var a=e.get(t);a&&a.slice().map((function(e){e(n)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,n)}))}}}function C(e){function t(t){if(void 0===t)return null;let n="";if(Array.isArray(t)){if(void 0===t[0])return null;n=t[0]}return"string"==typeof t&&(n=t),_(e.parse,n)}return{eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide:n=>t(n)??e}},withOptions(e){return{...this,...e}}}}var T=C({parse:e=>e,serialize:e=>`${e}`}),N=C({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()});function P(e,t){return e.valueOf()===t.valueOf()}C({parse:e=>{const t=N.parse(e);return null===t?null:t-1},serialize:e=>N.serialize(e+1)}),C({parse:e=>{const t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{const t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),C({parse:e=>{const t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),C({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),C({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString(),eq:P}),C({parse:e=>{const t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString(),eq:P});var A=C({parse:e=>{const t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10),eq:P});function O(e){return C({parse:t=>{try{const n=JSON.parse(t);return e(n)}catch{return null}},serialize:e=>JSON.stringify(e),eq:(e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t)})}function D(e,t=","){const n=e.eq??((e,t)=>e===t),a=encodeURIComponent(t);return C({parse:n=>""===n?[]:n.split(t).map(((n,r)=>_(e.parse,n.replaceAll(a,t),`[${r}]`))).filter((e=>null!=e)),serialize:n=>n.map((n=>(e.serialize?e.serialize(n):String(n)).replaceAll(t,a))).join(t),eq:(e,t)=>e===t||e.length===t.length&&e.every(((e,a)=>n(e,t[a])))})}var L,Z,j=M();function H(e,{history:t="replace",shallow:n=!0,scroll:r=!1,throttleMs:s=v,parse:i=e=>e,serialize:o=String,eq:l=(e,t)=>e===t,defaultValue:c,clearOnDefault:d=!0,startTransition:u}={history:"replace",scroll:!1,shallow:!0,throttleMs:v,parse:e=>e,serialize:String,eq:(e,t)=>e===t,clearOnDefault:!0,defaultValue:void 0}){const m=function(){const e=(0,a.useContext)(y);if(!("useAdapter"in e))throw new Error(p(404));return e.useAdapter()}(),h=m.searchParams,g=(0,a.useRef)(h?.get(e)??null),[b,S]=(0,a.useState)((()=>{const t=function(e){return w.get(e)}(e),n=void 0===t?h?.get(e)??null:t;return null===n?null:_(i,n,e)})),I=(0,a.useRef)(b);f("[nuqs `%s`] render - state: %O, iSP: %s",e,b,h?.get(e)??null),(0,a.useEffect)((()=>{const t=h?.get(e)??null;if(t===g.current)return;const n=null===t?null:_(i,t,e);f("[nuqs `%s`] syncFromUseSearchParams %O",e,n),I.current=n,g.current=t,S(n)}),[h?.get(e),e]),(0,a.useEffect)((()=>{function t({state:t,query:n}){f("[nuqs `%s`] updateInternalState %O",e,t),I.current=t,g.current=n,S(t)}return f("[nuqs `%s`] subscribing to sync",e),j.on(e,t),()=>{f("[nuqs `%s`] unsubscribing from sync",e),j.off(e,t)}}),[e]);const M=(0,a.useCallback)(((a,i={})=>{let h=function(e){return"function"==typeof e}(a)?a(I.current??c??null):a;(i.clearOnDefault??d)&&null!==h&&void 0!==c&&l(h,c)&&(h=null);const p=function(e,t,n,a){const r=null===t?null:n(t);return f("[nuqs queue] Enqueueing %s=%s %O",e,r,a),w.set(e,r),"push"===a.history&&(x.history="push"),a.scroll&&(x.scroll=!0),!1===a.shallow&&(x.shallow=!1),a.startTransition&&E.add(a.startTransition),x.throttleMs=Math.max(a.throttleMs??v,Number.isFinite(x.throttleMs)?x.throttleMs:0),r}(e,h,o,{history:i.history??t,shallow:i.shallow??n,scroll:i.scroll??r,throttleMs:i.throttleMs??s,startTransition:i.startTransition??u});return j.emit(e,{state:h,query:p}),k(m)}),[e,t,n,r,s,u,m.updateUrl,m.getSearchParamsSnapshot,m.rateLimitFactor]);return[b??c??null,M]}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(_x){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),a={};for(const e of n)a[e]=t[e];return e.objectValues(a)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(L||(L={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Z||(Z={}));const F=L.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),R=e=>{switch(typeof e){case"undefined":return F.undefined;case"string":return F.string;case"number":return isNaN(e)?F.nan:F.number;case"boolean":return F.boolean;case"function":return F.function;case"bigint":return F.bigint;case"symbol":return F.symbol;case"object":return Array.isArray(e)?F.array:null===e?F.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?F.promise:"undefined"!=typeof Map&&e instanceof Map?F.map:"undefined"!=typeof Set&&e instanceof Set?F.set:"undefined"!=typeof Date&&e instanceof Date?F.date:F.object;default:return F.unknown}},z=L.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class B extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},a=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(a);else if("invalid_return_type"===r.code)a(r.returnTypeError);else if("invalid_arguments"===r.code)a(r.argumentsError);else if(0===r.path.length)n._errors.push(t(r));else{let e=n,a=0;for(;a<r.path.length;){const n=r.path[a];a===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(r))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(this),n}static assert(e){if(!(e instanceof B))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,L.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const a of this.issues)a.path.length>0?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}B.create=e=>new B(e);const W=(e,t)=>{let n;switch(e.code){case z.invalid_type:n=e.received===F.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,L.jsonStringifyReplacer)}`;break;case z.unrecognized_keys:n=`Unrecognized key(s) in object: ${L.joinValues(e.keys,", ")}`;break;case z.invalid_union:n="Invalid input";break;case z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${L.joinValues(e.options)}`;break;case z.invalid_enum_value:n=`Invalid enum value. Expected ${L.joinValues(e.options)}, received '${e.received}'`;break;case z.invalid_arguments:n="Invalid function arguments";break;case z.invalid_return_type:n="Invalid function return type";break;case z.invalid_date:n="Invalid date";break;case z.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:L.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case z.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case z.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case z.custom:n="Invalid input";break;case z.invalid_intersection_types:n="Intersection results could not be merged";break;case z.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case z.not_finite:n="Number must be finite";break;default:n=t.defaultError,L.assertNever(e)}return{message:n}};let U=W;function V(){return U}const $=e=>{const{data:t,path:n,errorMaps:a,issueData:r}=e,s=[...n,...r.path||[]],i={...r,path:s};if(void 0!==r.message)return{...r,path:s,message:r.message};let o="";const l=a.filter((e=>!!e)).slice().reverse();for(const e of l)o=e(i,{data:t,defaultError:o}).message;return{...r,path:s,message:o}};function G(e,t){const n=V(),a=$({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===W?void 0:W].filter((e=>!!e))});e.common.issues.push(a)}class q{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const a of t){if("aborted"===a.status)return Y;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,a=await e.value;n.push({key:t,value:a})}return q.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const a of t){const{key:t,value:r}=a;if("aborted"===t.status)return Y;if("aborted"===r.status)return Y;"dirty"===t.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===t.value||void 0===r.value&&!a.alwaysSet||(n[t.value]=r.value)}return{status:e.value,value:n}}}const Y=Object.freeze({status:"aborted"}),Q=e=>({status:"dirty",value:e}),K=e=>({status:"valid",value:e}),J=e=>"aborted"===e.status,X=e=>"dirty"===e.status,ee=e=>"valid"===e.status,te=e=>"undefined"!=typeof Promise&&e instanceof Promise;function ne(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e)}function ae(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?r.call(e,n):r?r.value=n:t.set(e,n),n}var re,se,ie;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(re||(re={}));class oe{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const le=(e,t)=>{if(ee(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new B(e.common.issues);return this._error=t,this._error}}};function ce(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:a,description:r}=e;if(t&&(n||a))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:r}:{errorMap:(t,r)=>{var s,i;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:r.defaultError}:void 0===r.data?{message:null!==(s=null!=o?o:a)&&void 0!==s?s:r.defaultError}:"invalid_type"!==t.code?{message:r.defaultError}:{message:null!==(i=null!=o?o:n)&&void 0!==i?i:r.defaultError}},description:r}}class de{get description(){return this._def.description}_getType(e){return R(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:R(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:R(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(te(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const a={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:R(e)},r=this._parseSync({data:e,path:a.path,parent:a});return le(a,r)}"~validate"(e){var t,n;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:R(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:a});return ee(t)?{value:t.value}:{issues:a.common.issues}}catch(e){(null===(n=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:a}).then((e=>ee(e)?{value:e.value}:{issues:a.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:R(e)},a=this._parse({data:e,path:n.path,parent:n}),r=await(te(a)?a:Promise.resolve(a));return le(n,r)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,a)=>{const r=e(t),s=()=>a.addIssue({code:z.custom,...n(t)});return"undefined"!=typeof Promise&&r instanceof Promise?r.then((e=>!!e||(s(),!1))):!!r||(s(),!1)}))}refinement(e,t){return this._refinement(((n,a)=>!!e(n)||(a.addIssue("function"==typeof t?t(n,a):t),!1)))}_refinement(e){return new dt({schema:this,typeName:bt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ut.create(this,this._def)}nullable(){return mt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ve.create(this)}promise(){return ct.create(this,this._def)}or(e){return qe.create([this,e],this._def)}and(e){return Je.create(this,e,this._def)}transform(e){return new dt({...ce(this._def),schema:this,typeName:bt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ht({...ce(this._def),innerType:this,defaultValue:t,typeName:bt.ZodDefault})}brand(){return new yt({typeName:bt.ZodBranded,type:this,...ce(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new pt({...ce(this._def),innerType:this,catchValue:t,typeName:bt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return _t.create(this,e)}readonly(){return vt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ue=/^c[^\s-]{8,}$/i,me=/^[0-9a-z]+$/,he=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ge=/^[a-z0-9_-]{21}$/i,fe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ye=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_e=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let ve;const we=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,be=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Se=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ke="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Me=new RegExp(`^${ke}$`);function Ce(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Te(e){let t=`${ke}T${Ce(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Ne(e,t){if(!fe.test(e))return!1;try{const[n]=e.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(a));return!("object"!=typeof r||null===r||!r.typ||!r.alg||t&&r.alg!==t)}catch(e){return!1}}function Pe(e,t){return!("v4"!==t&&t||!xe.test(e))||!("v6"!==t&&t||!be.test(e))}class Ae extends de{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==F.string){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.string,received:t.parsedType}),Y}const t=new q;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const a=e.data.length>s.value,r=e.data.length<s.value;(a||r)&&(n=this._getOrReturnCtx(e,n),a?G(n,{code:z.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):r&&G(n,{code:z.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)_e.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"email",code:z.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)ve||(ve=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ve.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"emoji",code:z.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)pe.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"uuid",code:z.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)ge.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"nanoid",code:z.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)ue.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid",code:z.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)me.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cuid2",code:z.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)he.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"ulid",code:z.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(a){n=this._getOrReturnCtx(e,n),G(n,{validation:"url",code:z.invalid_string,message:s.message}),t.dirty()}else"regex"===s.kind?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"regex",code:z.invalid_string,message:s.message}),t.dirty())):"trim"===s.kind?e.data=e.data.trim():"includes"===s.kind?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty()):"toLowerCase"===s.kind?e.data=e.data.toLowerCase():"toUpperCase"===s.kind?e.data=e.data.toUpperCase():"startsWith"===s.kind?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty()):"endsWith"===s.kind?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty()):"datetime"===s.kind?Te(s).test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:"datetime",message:s.message}),t.dirty()):"date"===s.kind?Me.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:"date",message:s.message}),t.dirty()):"time"===s.kind?new RegExp(`^${Ce(s)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{code:z.invalid_string,validation:"time",message:s.message}),t.dirty()):"duration"===s.kind?ye.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"duration",code:z.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(a=e.data,("v4"!==(r=s.version)&&r||!we.test(a))&&("v6"!==r&&r||!Ee.test(a))&&(n=this._getOrReturnCtx(e,n),G(n,{validation:"ip",code:z.invalid_string,message:s.message}),t.dirty())):"jwt"===s.kind?Ne(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"jwt",code:z.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?Pe(e.data,s.version)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"cidr",code:z.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?Se.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"base64",code:z.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?Ie.test(e.data)||(n=this._getOrReturnCtx(e,n),G(n,{validation:"base64url",code:z.invalid_string,message:s.message}),t.dirty()):L.assertNever(s);var a,r;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:z.invalid_string,...re.errToObj(n)})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...re.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...re.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...re.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...re.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...re.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...re.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...re.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...re.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...re.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...re.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...re.errToObj(t)})}nonempty(e){return this.min(1,re.errToObj(e))}trim(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ae({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Oe(e,t){const n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,r=n>a?n:a;return parseInt(e.toFixed(r).replace(".",""))%parseInt(t.toFixed(r).replace(".",""))/Math.pow(10,r)}Ae.create=e=>{var t;return new Ae({checks:[],typeName:bt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ce(e)})};class De extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==F.number){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.number,received:t.parsedType}),Y}let t;const n=new q;for(const a of this._def.checks)"int"===a.kind?L.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):"multipleOf"===a.kind?0!==Oe(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_finite,message:a.message}),n.dirty()):L.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,re.toString(t))}gt(e,t){return this.setLimit("min",e,!1,re.toString(t))}lte(e,t){return this.setLimit("max",e,!0,re.toString(t))}lt(e,t){return this.setLimit("max",e,!1,re.toString(t))}setLimit(e,t,n,a){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:re.toString(a)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:re.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:re.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&L.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}De.create=e=>new De({checks:[],typeName:bt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...ce(e)});class Le extends de{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==F.bigint)return this._getInvalidInput(e);let t;const n=new q;for(const a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),G(t,{code:z.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):L.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.bigint,received:t.parsedType}),Y}gte(e,t){return this.setLimit("min",e,!0,re.toString(t))}gt(e,t){return this.setLimit("min",e,!1,re.toString(t))}lte(e,t){return this.setLimit("max",e,!0,re.toString(t))}lt(e,t){return this.setLimit("max",e,!1,re.toString(t))}setLimit(e,t,n,a){return new Le({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:re.toString(a)}]})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:re.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Le.create=e=>{var t;return new Le({checks:[],typeName:bt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...ce(e)})};class Ze extends de{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==F.boolean){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.boolean,received:t.parsedType}),Y}return K(e.data)}}Ze.create=e=>new Ze({typeName:bt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...ce(e)});class je extends de{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==F.date){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.date,received:t.parsedType}),Y}if(isNaN(e.data.getTime()))return G(this._getOrReturnCtx(e),{code:z.invalid_date}),Y;const t=new q;let n;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),G(n,{code:z.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):L.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new je({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:re.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:re.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}je.create=e=>new je({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:bt.ZodDate,...ce(e)});class He extends de{_parse(e){if(this._getType(e)!==F.symbol){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.symbol,received:t.parsedType}),Y}return K(e.data)}}He.create=e=>new He({typeName:bt.ZodSymbol,...ce(e)});class Fe extends de{_parse(e){if(this._getType(e)!==F.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.undefined,received:t.parsedType}),Y}return K(e.data)}}Fe.create=e=>new Fe({typeName:bt.ZodUndefined,...ce(e)});class Re extends de{_parse(e){if(this._getType(e)!==F.null){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.null,received:t.parsedType}),Y}return K(e.data)}}Re.create=e=>new Re({typeName:bt.ZodNull,...ce(e)});class ze extends de{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}ze.create=e=>new ze({typeName:bt.ZodAny,...ce(e)});class Be extends de{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Be.create=e=>new Be({typeName:bt.ZodUnknown,...ce(e)});class We extends de{_parse(e){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.never,received:t.parsedType}),Y}}We.create=e=>new We({typeName:bt.ZodNever,...ce(e)});class Ue extends de{_parse(e){if(this._getType(e)!==F.undefined){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.void,received:t.parsedType}),Y}return K(e.data)}}Ue.create=e=>new Ue({typeName:bt.ZodVoid,...ce(e)});class Ve extends de{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),a=this._def;if(t.parsedType!==F.array)return G(t,{code:z.invalid_type,expected:F.array,received:t.parsedType}),Y;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,r=t.data.length<a.exactLength.value;(e||r)&&(G(t,{code:e?z.too_big:z.too_small,minimum:r?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(G(t,{code:z.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(G(t,{code:z.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>a.type._parseAsync(new oe(t,e,t.path,n))))).then((e=>q.mergeArray(n,e)));const r=[...t.data].map(((e,n)=>a.type._parseSync(new oe(t,e,t.path,n))));return q.mergeArray(n,r)}get element(){return this._def.type}min(e,t){return new Ve({...this._def,minLength:{value:e,message:re.toString(t)}})}max(e,t){return new Ve({...this._def,maxLength:{value:e,message:re.toString(t)}})}length(e,t){return new Ve({...this._def,exactLength:{value:e,message:re.toString(t)}})}nonempty(e){return this.min(1,e)}}function $e(e){if(e instanceof Ge){const t={};for(const n in e.shape){const a=e.shape[n];t[n]=ut.create($e(a))}return new Ge({...e._def,shape:()=>t})}return e instanceof Ve?new Ve({...e._def,type:$e(e.element)}):e instanceof ut?ut.create($e(e.unwrap())):e instanceof mt?mt.create($e(e.unwrap())):e instanceof Xe?Xe.create(e.items.map((e=>$e(e)))):e}Ve.create=(e,t)=>new Ve({type:e,minLength:null,maxLength:null,exactLength:null,typeName:bt.ZodArray,...ce(t)});class Ge extends de{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=L.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==F.object){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.object,received:t.parsedType}),Y}const{status:t,ctx:n}=this._processInputParams(e),{shape:a,keys:r}=this._getCached(),s=[];if(!(this._def.catchall instanceof We&&"strip"===this._def.unknownKeys))for(const e in n.data)r.includes(e)||s.push(e);const i=[];for(const e of r){const t=a[e],r=n.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new oe(n,r,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof We){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)s.length>0&&(G(n,{code:z.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const a=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new oe(n,a,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of i){const n=await t.key,a=await t.value;e.push({key:n,value:a,alwaysSet:t.alwaysSet})}return e})).then((e=>q.mergeObjectSync(t,e))):q.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return re.errToObj,new Ge({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var a,r,s,i;const o=null!==(s=null===(r=(a=this._def).errorMap)||void 0===r?void 0:r.call(a,t,n).message)&&void 0!==s?s:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=re.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new Ge({...this._def,unknownKeys:"strip"})}passthrough(){return new Ge({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ge({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ge({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:bt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ge({...this._def,catchall:e})}pick(e){const t={};return L.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Ge({...this._def,shape:()=>t})}omit(e){const t={};return L.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Ge({...this._def,shape:()=>t})}deepPartial(){return $e(this)}partial(e){const t={};return L.objectKeys(this.shape).forEach((n=>{const a=this.shape[n];e&&!e[n]?t[n]=a:t[n]=a.optional()})),new Ge({...this._def,shape:()=>t})}required(e){const t={};return L.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof ut;)e=e._def.innerType;t[n]=e}})),new Ge({...this._def,shape:()=>t})}keyof(){return it(L.objectKeys(this.shape))}}Ge.create=(e,t)=>new Ge({shape:()=>e,unknownKeys:"strip",catchall:We.create(),typeName:bt.ZodObject,...ce(t)}),Ge.strictCreate=(e,t)=>new Ge({shape:()=>e,unknownKeys:"strict",catchall:We.create(),typeName:bt.ZodObject,...ce(t)}),Ge.lazycreate=(e,t)=>new Ge({shape:e,unknownKeys:"strip",catchall:We.create(),typeName:bt.ZodObject,...ce(t)});class qe extends de{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new B(e.ctx.common.issues)));return G(t,{code:z.invalid_union,unionErrors:n}),Y}));{let e;const a=[];for(const r of n){const n={...t,common:{...t.common,issues:[]},parent:null},s=r._parseSync({data:t.data,path:t.path,parent:n});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:n}),n.common.issues.length&&a.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const r=a.map((e=>new B(e)));return G(t,{code:z.invalid_union,unionErrors:r}),Y}}get options(){return this._def.options}}qe.create=(e,t)=>new qe({options:e,typeName:bt.ZodUnion,...ce(t)});const Ye=e=>e instanceof rt?Ye(e.schema):e instanceof dt?Ye(e.innerType()):e instanceof st?[e.value]:e instanceof ot?e.options:e instanceof lt?L.objectValues(e.enum):e instanceof ht?Ye(e._def.innerType):e instanceof Fe?[void 0]:e instanceof Re?[null]:e instanceof ut?[void 0,...Ye(e.unwrap())]:e instanceof mt?[null,...Ye(e.unwrap())]:e instanceof yt||e instanceof vt?Ye(e.unwrap()):e instanceof pt?Ye(e._def.innerType):[];class Qe extends de{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==F.object)return G(t,{code:z.invalid_type,expected:F.object,received:t.parsedType}),Y;const n=this.discriminator,a=t.data[n],r=this.optionsMap.get(a);return r?t.common.async?r._parseAsync({data:t.data,path:t.path,parent:t}):r._parseSync({data:t.data,path:t.path,parent:t}):(G(t,{code:z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const a=new Map;for(const n of t){const t=Ye(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(a.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);a.set(r,n)}}return new Qe({typeName:bt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...ce(n)})}}function Ke(e,t){const n=R(e),a=R(t);if(e===t)return{valid:!0,data:e};if(n===F.object&&a===F.object){const n=L.objectKeys(t),a=L.objectKeys(e).filter((e=>-1!==n.indexOf(e))),r={...e,...t};for(const n of a){const a=Ke(e[n],t[n]);if(!a.valid)return{valid:!1};r[n]=a.data}return{valid:!0,data:r}}if(n===F.array&&a===F.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let a=0;a<e.length;a++){const r=Ke(e[a],t[a]);if(!r.valid)return{valid:!1};n.push(r.data)}return{valid:!0,data:n}}return n===F.date&&a===F.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Je extends de{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=(e,a)=>{if(J(e)||J(a))return Y;const r=Ke(e.value,a.value);return r.valid?((X(e)||X(a))&&t.dirty(),{status:t.value,value:r.data}):(G(n,{code:z.invalid_intersection_types}),Y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>a(e,t))):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Je.create=(e,t,n)=>new Je({left:e,right:t,typeName:bt.ZodIntersection,...ce(n)});class Xe extends de{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.array)return G(n,{code:z.invalid_type,expected:F.array,received:n.parsedType}),Y;if(n.data.length<this._def.items.length)return G(n,{code:z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&n.data.length>this._def.items.length&&(G(n,{code:z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map(((e,t)=>{const a=this._def.items[t]||this._def.rest;return a?a._parse(new oe(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(a).then((e=>q.mergeArray(t,e))):q.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Xe({...this._def,rest:e})}}Xe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xe({items:e,typeName:bt.ZodTuple,rest:null,...ce(t)})};class et extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.object)return G(n,{code:z.invalid_type,expected:F.object,received:n.parsedType}),Y;const a=[],r=this._def.keyType,s=this._def.valueType;for(const e in n.data)a.push({key:r._parse(new oe(n,e,n.path,e)),value:s._parse(new oe(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?q.mergeObjectAsync(t,a):q.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,n){return new et(t instanceof de?{keyType:e,valueType:t,typeName:bt.ZodRecord,...ce(n)}:{keyType:Ae.create(),valueType:e,typeName:bt.ZodRecord,...ce(t)})}}class tt extends de{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.map)return G(n,{code:z.invalid_type,expected:F.map,received:n.parsedType}),Y;const a=this._def.keyType,r=this._def.valueType,s=[...n.data.entries()].map((([e,t],s)=>({key:a._parse(new oe(n,e,n.path,[s,"key"])),value:r._parse(new oe(n,t,n.path,[s,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of s){const a=await n.key,r=await n.value;if("aborted"===a.status||"aborted"===r.status)return Y;"dirty"!==a.status&&"dirty"!==r.status||t.dirty(),e.set(a.value,r.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const a=n.key,r=n.value;if("aborted"===a.status||"aborted"===r.status)return Y;"dirty"!==a.status&&"dirty"!==r.status||t.dirty(),e.set(a.value,r.value)}return{status:t.value,value:e}}}}tt.create=(e,t,n)=>new tt({valueType:t,keyType:e,typeName:bt.ZodMap,...ce(n)});class nt extends de{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.set)return G(n,{code:z.invalid_type,expected:F.set,received:n.parsedType}),Y;const a=this._def;null!==a.minSize&&n.data.size<a.minSize.value&&(G(n,{code:z.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&n.data.size>a.maxSize.value&&(G(n,{code:z.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const r=this._def.valueType;function s(e){const n=new Set;for(const a of e){if("aborted"===a.status)return Y;"dirty"===a.status&&t.dirty(),n.add(a.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map(((e,t)=>r._parse(new oe(n,e,n.path,t))));return n.common.async?Promise.all(i).then((e=>s(e))):s(i)}min(e,t){return new nt({...this._def,minSize:{value:e,message:re.toString(t)}})}max(e,t){return new nt({...this._def,maxSize:{value:e,message:re.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}nt.create=(e,t)=>new nt({valueType:e,minSize:null,maxSize:null,typeName:bt.ZodSet,...ce(t)});class at extends de{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==F.function)return G(t,{code:z.invalid_type,expected:F.function,received:t.parsedType}),Y;function n(e,n){return $({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,V(),W].filter((e=>!!e)),issueData:{code:z.invalid_arguments,argumentsError:n}})}function a(e,n){return $({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,V(),W].filter((e=>!!e)),issueData:{code:z.invalid_return_type,returnTypeError:n}})}const r={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ct){const e=this;return K((async function(...t){const i=new B([]),o=await e._def.args.parseAsync(t,r).catch((e=>{throw i.addIssue(n(t,e)),i})),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,r).catch((e=>{throw i.addIssue(a(l,e)),i}))}))}{const e=this;return K((function(...t){const i=e._def.args.safeParse(t,r);if(!i.success)throw new B([n(t,i.error)]);const o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,r);if(!l.success)throw new B([a(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new at({...this._def,args:Xe.create(e).rest(Be.create())})}returns(e){return new at({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new at({args:e||Xe.create([]).rest(Be.create()),returns:t||Be.create(),typeName:bt.ZodFunction,...ce(n)})}}class rt extends de{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rt.create=(e,t)=>new rt({getter:e,typeName:bt.ZodLazy,...ce(t)});class st extends de{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return G(t,{received:t.data,code:z.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}function it(e,t){return new ot({values:e,typeName:bt.ZodEnum,...ce(t)})}st.create=(e,t)=>new st({value:e,typeName:bt.ZodLiteral,...ce(t)});class ot extends de{constructor(){super(...arguments),se.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return G(t,{expected:L.joinValues(n),received:t.parsedType,code:z.invalid_type}),Y}if(ne(this,se,"f")||ae(this,se,new Set(this._def.values),"f"),!ne(this,se,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return G(t,{received:t.data,code:z.invalid_enum_value,options:n}),Y}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ot.create(e,{...this._def,...t})}exclude(e,t=this._def){return ot.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}se=new WeakMap,ot.create=it;class lt extends de{constructor(){super(...arguments),ie.set(this,void 0)}_parse(e){const t=L.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==F.string&&n.parsedType!==F.number){const e=L.objectValues(t);return G(n,{expected:L.joinValues(e),received:n.parsedType,code:z.invalid_type}),Y}if(ne(this,ie,"f")||ae(this,ie,new Set(L.getValidEnumValues(this._def.values)),"f"),!ne(this,ie,"f").has(e.data)){const e=L.objectValues(t);return G(n,{received:n.data,code:z.invalid_enum_value,options:e}),Y}return K(e.data)}get enum(){return this._def.values}}ie=new WeakMap,lt.create=(e,t)=>new lt({values:e,typeName:bt.ZodNativeEnum,...ce(t)});class ct extends de{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==F.promise&&!1===t.common.async)return G(t,{code:z.invalid_type,expected:F.promise,received:t.parsedType}),Y;const n=t.parsedType===F.promise?t.data:Promise.resolve(t.data);return K(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ct.create=(e,t)=>new ct({type:e,typeName:bt.ZodPromise,...ce(t)});class dt extends de{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:e=>{G(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===a.type){const e=a.transform(n.data,r);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return Y;const a=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===a.status?Y:"dirty"===a.status||"dirty"===t.value?Q(a.value):a}));{if("aborted"===t.value)return Y;const a=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===a.status?Y:"dirty"===a.status||"dirty"===t.value?Q(a.value):a}}if("refinement"===a.type){const e=e=>{const t=a.refinement(e,r);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===a.status?Y:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Y:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===a.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ee(e))return e;const s=a.transform(e.value,r);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>ee(e)?Promise.resolve(a.transform(e.value,r)).then((e=>({status:t.value,value:e}))):e))}L.assertNever(a)}}dt.create=(e,t,n)=>new dt({schema:e,typeName:bt.ZodEffects,effect:t,...ce(n)}),dt.createWithPreprocess=(e,t,n)=>new dt({schema:t,effect:{type:"preprocess",transform:e},typeName:bt.ZodEffects,...ce(n)});class ut extends de{_parse(e){return this._getType(e)===F.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ut.create=(e,t)=>new ut({innerType:e,typeName:bt.ZodOptional,...ce(t)});class mt extends de{_parse(e){return this._getType(e)===F.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}mt.create=(e,t)=>new mt({innerType:e,typeName:bt.ZodNullable,...ce(t)});class ht extends de{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===F.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ht.create=(e,t)=>new ht({innerType:e,typeName:bt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...ce(t)});class pt extends de{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return te(a)?a.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new B(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new B(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}pt.create=(e,t)=>new pt({innerType:e,typeName:bt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...ce(t)});class gt extends de{_parse(e){if(this._getType(e)!==F.nan){const t=this._getOrReturnCtx(e);return G(t,{code:z.invalid_type,expected:F.nan,received:t.parsedType}),Y}return{status:"valid",value:e.data}}}gt.create=e=>new gt({typeName:bt.ZodNaN,...ce(e)});const ft=Symbol("zod_brand");class yt extends de{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class _t extends de{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Y:"dirty"===e.status?(t.dirty(),Q(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Y:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new _t({in:e,out:t,typeName:bt.ZodPipeline})}}class vt extends de{_parse(e){const t=this._def.innerType._parse(e),n=e=>(ee(e)&&(e.value=Object.freeze(e.value)),e);return te(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function wt(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function xt(e,t={},n){return e?ze.create().superRefine(((a,r)=>{var s,i;const o=e(a);if(o instanceof Promise)return o.then((e=>{var s,i;if(!e){const e=wt(t,a),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:n)||void 0===i||i;r.addIssue({code:"custom",...e,fatal:o})}}));if(!o){const e=wt(t,a),o=null===(i=null!==(s=e.fatal)&&void 0!==s?s:n)||void 0===i||i;r.addIssue({code:"custom",...e,fatal:o})}})):ze.create()}vt.create=(e,t)=>new vt({innerType:e,typeName:bt.ZodReadonly,...ce(t)});const Et={object:Ge.lazycreate};var bt;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(bt||(bt={}));const St=Ae.create,It=De.create,kt=gt.create,Mt=Le.create,Ct=Ze.create,Tt=je.create,Nt=He.create,Pt=Fe.create,At=Re.create,Ot=ze.create,Dt=Be.create,Lt=We.create,Zt=Ue.create,jt=Ve.create,Ht=Ge.create,Ft=Ge.strictCreate,Rt=qe.create,zt=Qe.create,Bt=Je.create,Wt=Xe.create,Ut=et.create,Vt=tt.create,$t=nt.create,Gt=at.create,qt=rt.create,Yt=st.create,Qt=ot.create,Kt=lt.create,Jt=ct.create,Xt=dt.create,en=ut.create,tn=mt.create,nn=dt.createWithPreprocess,an=_t.create,rn={string:e=>Ae.create({...e,coerce:!0}),number:e=>De.create({...e,coerce:!0}),boolean:e=>Ze.create({...e,coerce:!0}),bigint:e=>Le.create({...e,coerce:!0}),date:e=>je.create({...e,coerce:!0})},sn=Y;var on=Object.freeze({__proto__:null,defaultErrorMap:W,setErrorMap:function(e){U=e},getErrorMap:V,makeIssue:$,EMPTY_PATH:[],addIssueToContext:G,ParseStatus:q,INVALID:Y,DIRTY:Q,OK:K,isAborted:J,isDirty:X,isValid:ee,isAsync:te,get util(){return L},get objectUtil(){return Z},ZodParsedType:F,getParsedType:R,ZodType:de,datetimeRegex:Te,ZodString:Ae,ZodNumber:De,ZodBigInt:Le,ZodBoolean:Ze,ZodDate:je,ZodSymbol:He,ZodUndefined:Fe,ZodNull:Re,ZodAny:ze,ZodUnknown:Be,ZodNever:We,ZodVoid:Ue,ZodArray:Ve,ZodObject:Ge,ZodUnion:qe,ZodDiscriminatedUnion:Qe,ZodIntersection:Je,ZodTuple:Xe,ZodRecord:et,ZodMap:tt,ZodSet:nt,ZodFunction:at,ZodLazy:rt,ZodLiteral:st,ZodEnum:ot,ZodNativeEnum:lt,ZodPromise:ct,ZodEffects:dt,ZodTransformer:dt,ZodOptional:ut,ZodNullable:mt,ZodDefault:ht,ZodCatch:pt,ZodNaN:gt,BRAND:ft,ZodBranded:yt,ZodPipeline:_t,ZodReadonly:vt,custom:xt,Schema:de,ZodSchema:de,late:Et,get ZodFirstPartyTypeKind(){return bt},coerce:rn,any:Ot,array:jt,bigint:Mt,boolean:Ct,date:Tt,discriminatedUnion:zt,effect:Xt,enum:Qt,function:Gt,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>xt((t=>t instanceof e),t),intersection:Bt,lazy:qt,literal:Yt,map:Vt,nan:kt,nativeEnum:Kt,never:Lt,null:At,nullable:tn,number:It,object:Ht,oboolean:()=>Ct().optional(),onumber:()=>It().optional(),optional:en,ostring:()=>St().optional(),pipeline:an,preprocess:nn,promise:Jt,record:Ut,set:$t,strictObject:Ft,string:St,symbol:Nt,transformer:Xt,tuple:Wt,undefined:Pt,union:Rt,unknown:Dt,void:Zt,NEVER:sn,ZodIssueCode:z,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:B});const ln={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function cn(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const dn={date:cn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:cn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:cn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},un={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function mn(e){return(t,n)=>{let a;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=n?.width?String(n.width):t;a=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=n?.width?String(n.width):e.defaultWidth;a=e.values[r]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function hn(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const i=s[0],o=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e){for(let t=0;t<e.length;t++)if(e[t].test(i))return t}(o):function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t].test(i))return t}(o);let c;return c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:t.slice(i.length)}}}var pn;const gn={code:"en-US",formatDistance:(e,t,n)=>{let a;const r=ln[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:dn,formatRelative:(e,t,n,a)=>un[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:mn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:mn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:mn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:mn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:mn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(pn={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(pn.matchPattern);if(!n)return null;const a=n[0],r=e.match(pn.parsePattern);if(!r)return null;let s=pn.valueCallback?pn.valueCallback(r[0]):r[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(a.length)}}),era:hn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:hn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:hn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:hn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:hn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let fn={};function yn(){return fn}Math.pow(10,8);const vn=6048e5,wn=Symbol.for("constructDateFrom");function xn(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&wn in e?e[wn](t):e instanceof Date?new e.constructor(t):new Date(t)}function En(e,t){return xn(t||e,e)}function bn(e){const t=En(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Sn(e,t){const n=En(e,t?.in);return n.setHours(0,0,0,0),n}function In(e,t){const n=En(e,t?.in);return function(e,t,n){const[a,r]=function(e,...t){const n=xn.bind(null,e||t.find((e=>"object"==typeof e)));return t.map(n)}(n?.in,e,t),s=Sn(a),i=Sn(r),o=+s-bn(s),l=+i-bn(i);return Math.round((o-l)/864e5)}(n,function(e,t){const n=En(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n))+1}function kn(e,t){const n=yn(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=En(e,t?.in),s=r.getDay(),i=(s<a?7:0)+s-a;return r.setDate(r.getDate()-i),r.setHours(0,0,0,0),r}function Mn(e,t){return kn(e,{...t,weekStartsOn:1})}function Cn(e,t){const n=En(e,t?.in),a=n.getFullYear(),r=xn(n,0);r.setFullYear(a+1,0,4),r.setHours(0,0,0,0);const s=Mn(r),i=xn(n,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const o=Mn(i);return n.getTime()>=s.getTime()?a+1:n.getTime()>=o.getTime()?a:a-1}function Tn(e,t){const n=En(e,t?.in),a=+Mn(n)-+function(e,t){const n=Cn(e,t),a=xn(t?.in||e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Mn(a)}(n);return Math.round(a/vn)+1}function Nn(e,t){const n=En(e,t?.in),a=n.getFullYear(),r=yn(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=xn(t?.in||e,0);i.setFullYear(a+1,0,s),i.setHours(0,0,0,0);const o=kn(i,t),l=xn(t?.in||e,0);l.setFullYear(a,0,s),l.setHours(0,0,0,0);const c=kn(l,t);return+n>=+o?a+1:+n>=+c?a:a-1}function Pn(e,t){const n=En(e,t?.in),a=+kn(n,t)-+function(e,t){const n=yn(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=Nn(e,t),s=xn(t?.in||e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),kn(s,t)}(n,t);return Math.round(a/vn)+1}function An(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const On={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return An("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):An(n+1,2)},d:(e,t)=>An(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>An(e.getHours()%12||12,t.length),H:(e,t)=>An(e.getHours(),t.length),m:(e,t)=>An(e.getMinutes(),t.length),s:(e,t)=>An(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return An(Math.trunc(a*Math.pow(10,n-3)),t.length)}},Dn={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return On.y(e,t)},Y:function(e,t,n,a){const r=Nn(e,a),s=r>0?r:1-r;return"YY"===t?An(s%100,2):"Yo"===t?n.ordinalNumber(s,{unit:"year"}):An(s,t.length)},R:function(e,t){return An(Cn(e),t.length)},u:function(e,t){return An(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return An(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return An(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return On.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return An(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=Pn(e,a);return"wo"===t?n.ordinalNumber(r,{unit:"week"}):An(r,t.length)},I:function(e,t,n){const a=Tn(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):An(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):On.d(e,t)},D:function(e,t,n){const a=In(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):An(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return An(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return An(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return An(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(r=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(r=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return On.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):On.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):An(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):An(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):On.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):On.s(e,t)},S:function(e,t){return On.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Zn(a);case"XXXX":case"XX":return jn(a);default:return jn(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return Zn(a);case"xxxx":case"xx":return jn(a);default:return jn(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ln(a,":");default:return"GMT"+jn(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ln(a,":");default:return"GMT"+jn(a,":")}},t:function(e,t,n){return An(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return An(+e,t.length)}};function Ln(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return 0===s?n+String(r):n+String(r)+t+An(s,2)}function Zn(e,t){return e%60==0?(e>0?"-":"+")+An(Math.abs(e)/60,2):jn(e,t)}function jn(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+An(Math.trunc(a/60),2)+t+An(a%60,2)}const Hn=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Fn=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Rn={p:Fn,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return Hn(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",Hn(a,t)).replace("{{time}}",Fn(r,t))}},zn=/^D+$/,Bn=/^Y+$/,Wn=["D","DD","YY","YYYY"];function Un(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+En(e)));var t}const Vn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$n=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Gn=/^'([^]*?)'?$/,qn=/''/g,Yn=/[a-zA-Z]/;function Qn(e,t,n){const a=yn(),r=n?.locale??a.locale??gn,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=En(e,n?.in);if(!Un(o))throw new RangeError("Invalid time value");let l=t.match($n).map((e=>{const t=e[0];return"p"===t||"P"===t?(0,Rn[t])(e,r.formatLong):e})).join("").match(Vn).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Kn(e)};if(Dn[t])return{isToken:!0,value:e};if(t.match(Yn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));r.localize.preprocessor&&(l=r.localize.preprocessor(o,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:r};return l.map((a=>{if(!a.isToken)return a.value;const s=a.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return Bn.test(e)}(s)||!n?.useAdditionalDayOfYearTokens&&function(e){return zn.test(e)}(s))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),Wn.includes(e))throw new RangeError(a)}(s,t,String(e)),(0,Dn[s[0]])(o,s,r.localize,c)})).join("")}function Kn(e){const t=e.match(Gn);return t?t[1].replace(qn,"'"):e}const Jn=[{label:(0,u.__)("Custom date range","simple-history"),value:"customRange"},{label:(0,u.__)("Today","simple-history"),value:"lastdays:1"},{label:(0,u.__)("Yesterday","simple-history"),value:"yesterday"},{label:(0,u.__)("Last 7 days","simple-history"),value:"lastdays:7"},{label:(0,u.__)("Last 14 days","simple-history"),value:"lastdays:14"},{label:(0,u.__)("Last 30 days","simple-history"),value:"lastdays:30"},{label:(0,u.__)("Last 60 days","simple-history"),value:"lastdays:60"}],Xn=[{label:(0,u.__)("Loading","simple-history"),value:""}],ea=[{label:(0,u._x)("Debug","Log level in gui","simple-history"),value:"debug"},{label:(0,u._x)("Info","Log level in gui","simple-history"),value:"info"},{label:(0,u._x)("Notice","Log level in gui","simple-history"),value:"notice"},{label:(0,u._x)("Warning","Log level in gui","simple-history"),value:"warning"},{label:(0,u._x)("Error","Log level in gui","simple-history"),value:"error"},{label:(0,u._x)("Critical","Log level in gui","simple-history"),value:"critical"},{label:(0,u._x)("Alert","Log level in gui","simple-history"),value:"alert"},{label:(0,u._x)("Emergency","Log level in gui","simple-history"),value:"emergency"}],ta="yyyy-MM-dd'T'HH:mm:ss",na=" - ",aa=Qn(Sn(new Date),ta),ra=Qn(function(e,t){const n=En(e,t?.in);return n.setHours(23,59,59,999),n}(new Date),ta);function sa({event:e}){window.location.hash=`#simple-history/event/${e.id}`}function ia(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function oa(e,t,n="wpadmin",a="plugin",r=""){const{addQueryArgs:s}=wp.url,i={utm_source:n,utm_medium:a,utm_campaign:t};return r&&(i.utm_content=r),s(e,i)}function la(){return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.__experimentalDivider,{style:{color:"var(--sh-color-separator)"}}),(0,a.createElement)(r.__experimentalHStack,{spacing:5,justify:"space-around",style:{padding:"1em 0"}},(0,a.createElement)(r.ExternalLink,{title:(0,u.__)("Visit the Simple History blog for new features, tips and tricks","simple-history"),href:oa("https://simple-history.com/blog/","blog_dashboard_footer")},(0,u.__)("Blog","simple-history")),(0,a.createElement)(r.ExternalLink,{title:(0,u.__)("Get help with common issues or ask questions","simple-history"),href:oa("https://simple-history.com/support/","support_dashboard_footer")},(0,u.__)("Support","simple-history")),(0,a.createElement)(r.ExternalLink,{title:"View information about premium features",href:oa("https://simple-history.com/premium/","premium_dashboard_footer")},(0,u.__)("Get Premium","simple-history"))))}const ca=window.wp.primitives;var da=n(848);const ua=(0,da.jsxs)(ca.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,da.jsx)(ca.Path,{d:"M7.5 12C7.5 11.1716 6.82843 10.5 6 10.5C5.17157 10.5 4.5 11.1716 4.5 12C4.5 12.8284 5.17157 13.5 6 13.5C6.82843 13.5 7.5 12.8284 7.5 12Z"}),(0,da.jsx)(ca.Path,{d:"M13.5 12C13.5 11.1716 12.8284 10.5 12 10.5C11.1716 10.5 10.5 11.1716 10.5 12C10.5 12.8284 11.1716 13.5 12 13.5C12.8284 13.5 13.5 12.8284 13.5 12Z"}),(0,da.jsx)(ca.Path,{d:"M19.5 12C19.5 11.1716 18.8284 10.5 18 10.5C17.1716 10.5 16.5 11.1716 16.5 12C16.5 12.8284 17.1716 13.5 18 13.5C18.8284 13.5 19.5 12.8284 19.5 12Z"})]}),ma=window.wp.hooks,ha=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M18 11.3l-1-1.1-4 4V3h-1.5v11.3L7 10.2l-1 1.1 6.2 5.8 5.8-5.8zm.5 3.7v3.5h-13V15H4v5h16v-5h-1.5z"})}),pa=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,da.jsx)(ca.Path,{d:"M10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6zM10 1c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7zm1-11H9v3H6v2h3v3h2v-3h3V9h-3V6z"})}),ga=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})}),fa=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})}),ya=(0,da.jsx)(ca.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,da.jsx)(ca.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8h1.5c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1z"})}),_a=(0,da.jsx)(ca.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,da.jsx)(ca.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z"})}),va=function(e){const{variant:t,char:n=null}=e;let s,i;switch(t){case"unlocked":s=ga;break;case"unlocked2":s=fa;break;case"unlocked3":s=ya;break;case"locked":s=_a;break;case"verified":i="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgLTk2MCA5NjAgOTYwIiB3aWR0aD0iNDgiPjxwYXRoIGQ9Im0zNDYtNjAtNzYtMTMwLTE1MS0zMSAxNy0xNDctOTYtMTEyIDk2LTExMS0xNy0xNDcgMTUxLTMxIDc2LTEzMSAxMzQgNjIgMTM0LTYyIDc3IDEzMSAxNTAgMzEtMTcgMTQ3IDk2IDExMS05NiAxMTIgMTcgMTQ3LTE1MCAzMS03NyAxMzAtMTM0LTYyLTEzNCA2MlptMjctNzkgMTA3LTQ1IDExMCA0NSA2Ny0xMDAgMTE3LTMwLTEyLTExOSA4MS05Mi04MS05NCAxMi0xMTktMTE3LTI4LTY5LTEwMC0xMDggNDUtMTEwLTQ1LTY3IDEwMC0xMTcgMjggMTIgMTE5LTgxIDk0IDgxIDkyLTEyIDEyMSAxMTcgMjggNzAgMTAwWm0xMDctMzQxWm0tNDMgMTMzIDIyNy0yMjUtNDUtNDEtMTgyIDE4MC05NS05OS00NiA0NSAxNDEgMTQwWiIvPjwvc3ZnPg==";break;default:s=null}return(0,a.createElement)("span",{className:"sh-Badge sh-Badge--premium"},(0,u.__)("Premium","simple-history"),s?(0,a.createElement)(r.Icon,{icon:s,size:20}):null,i?(0,a.createElement)("img",{src:i,alt:"",style:{width:"20px",padding:"0 0 0 .5em"}}):null,n?(0,a.createElement)("span",{style:{padding:"0 0 0 .5em"}},n):null)},wa=window.wp.data,xa=window.wp.coreData,Ea=e=>{const{premiumFeatureModalTitle:t,premiumFeatureDescription:n,icon:s,image:i,handleModalClose:o}=e;return(0,a.createElement)(r.Modal,{onRequestClose:o,className:"sh-PremiumFeatureModal",__experimentalHideHeader:!0},(0,a.createElement)("div",{className:"sh-PremiumFeatureModal-icon"},(0,a.createElement)(r.Icon,{icon:s,size:48})),(0,a.createElement)("h2",{className:"sh-PremiumFeatureModal-title"},t),(0,a.createElement)("p",{className:"sh-PremiumFeatureModal-description"},n),(0,a.createElement)("div",{className:"sh-PremiumFeatureModal-imageContainer"},(0,a.createElement)("img",{src:i,alt:t,className:"sh-PremiumFeatureModal-image"})),(0,a.createElement)("div",{className:"sh-PremiumFeatureModal-actions"},(0,a.createElement)(r.Button,{variant:"primary",onClick:()=>{window.open(oa("https://simple-history.com/add-ons/premium/","premium_global_modal")),o()},className:"sh-PremiumFeatureModal-upgradeButton"},(0,u.__)("Upgrade to Premium now","simple-history")),(0,a.createElement)("button",{className:"sh-PremiumFeatureModal-later",onClick:o},(0,u.__)("Maybe later","simple-history"))))},ba=(0,o.createContext)(null),Sa=({children:e})=>{const[t,n]=(0,o.useState)(!1),[r,s]=(0,o.useState)({premiumFeatureModalTitle:"",premiumFeatureDescription:"",icon:null,image:""});return(0,a.createElement)(ba.Provider,{value:{showModal:(e,t,a,r)=>{s({premiumFeatureModalTitle:e,premiumFeatureDescription:t,icon:a,image:r}),n(!0)}}},e,t&&(0,a.createElement)(Ea,{...r,handleModalClose:()=>{n(!1)}}))},Ia=()=>{const e=(0,o.useContext)(ba);if(!e)throw new Error("usePremiumFeaturesModal must be used within a PremiumFeaturesModalProvider");return e};function ka(e){const{onCloseDropdownMenu:t}=e,{showModal:n}=Ia(),s=(i="manage_options",(0,wa.useSelect)((e=>{const t=e(xa.store).getCurrentUser()?.id;if(!t)return!1;const n=e(xa.store).getEntityRecord("root","user",t);return!(!n||!n.capabilities||!n.capabilities[i])}),[i]));var i;if(!1===(0,ma.applyFilters)("SimpleHistory.showPremiumAddonsMenuGroup",!0))return null;const o=s?(0,a.createElement)(r.MenuItem,{onClick:()=>{t(),n((0,u.__)("Unlock Manual Entries","simple-history"),(0,u.__)("Add custom events to your activity log with a simple form. Perfect for noting important changes or decisions that happen outside WordPress.","simple-history"),pa,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjAwIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YwZjBmMCIvPgogIDxyZWN0IHg9IjIwIiB5PSIyMCIgd2lkdGg9IjM2MCIgaGVpZ2h0PSIxNjAiIHJ4PSI4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiLz4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzMzIj5DcmVhdGUgbG9nIGVudHJ5PC90ZXh0PgogIDxyZWN0IHg9IjQwIiB5PSI2NSIgd2lkdGg9IjMyMCIgaGVpZ2h0PSIzMiIgcng9IjQiIGZpbGw9IiNmNWY1ZjUiIHN0cm9rZT0iI2NjYyIvPgogIDx0ZXh0IHg9IjUwIiB5PSI4NiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiM5OTkiPkVudGVyIG1lc3NhZ2UuLi48L3RleHQ+CiAgPHJlY3QgeD0iNDAiIHk9IjExMCIgd2lkdGg9IjE1MCIgaGVpZ2h0PSIzMiIgcng9IjQiIGZpbGw9IiNmNWY1ZjUiIHN0cm9rZT0iI2NjYyIvPgogIDxyZWN0IHg9IjIxMCIgeT0iMTEwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iI2Y1ZjVmNSIgc3Ryb2tlPSIjY2NjIi8+CiAgPHJlY3QgeD0iMjgwIiB5PSIxNTAiIHdpZHRoPSI4MCIgaGVpZ2h0PSIyNiIgcng9IjQiIGZpbGw9IiMzZjkzNDkiLz4KICA8dGV4dCB4PSIzMjAiIHk9IjE2NyIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFkZDwvdGV4dD4KPC9zdmc+")},suffix:(0,a.createElement)(va,null),info:(0,u.__)("Manually add custom events to the activity log","simple-history")},(0,u.__)("Create log entry","simple-history")):null;return(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(r.MenuItem,{onClick:()=>{t(),n((0,u.__)("Unlock Export","simple-history"),(0,u.__)("Export your current log selection to CSV or JSON. Your active filters are applied, so you get exactly the events you need.","simple-history"),ha,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjAwIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YwZjBmMCIvPgogIDxyZWN0IHg9IjIwIiB5PSIyMCIgd2lkdGg9IjM2MCIgaGVpZ2h0PSIxNjAiIHJ4PSI4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiLz4KICA8cmVjdCB4PSI0MCIgeT0iNDAiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTYiIHJ4PSI0IiBmaWxsPSIjZGRkIi8+CiAgPHJlY3QgeD0iNDAiIHk9IjcwIiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjEyIiByeD0iMyIgZmlsbD0iI2UwZTBlMCIvPgogIDxyZWN0IHg9IjQwIiB5PSI5MiIgd2lkdGg9IjI4MCIgaGVpZ2h0PSIxMiIgcng9IjMiIGZpbGw9IiNlMGUwZTAiLz4KICA8cmVjdCB4PSI0MCIgeT0iMTE0IiB3aWR0aD0iMzAwIiBoZWlnaHQ9IjEyIiByeD0iMyIgZmlsbD0iI2UwZTBlMCIvPgogIDxyZWN0IHg9IjQwIiB5PSIxNDAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMzAiIHJ4PSI0IiBmaWxsPSIjM2Y5MzQ5Ii8+CiAgPHRleHQgeD0iOTAiIHk9IjE2MCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkV4cG9ydDwvdGV4dD4KPC9zdmc+")},suffix:(0,a.createElement)(va,null),info:(0,u.__)("CSV and JSON supported","simple-history")},(0,u.__)("Export results","simple-history")),o)}function Ma(e){const{eventsQueryParams:t,eventsTotal:n}=e;return(0,a.createElement)(r.DropdownMenu,{text:(0,u.__)("Event options","simple-history"),label:(0,u.__)("Actions (Export & other tools)","simple-history"),icon:ua,toggleProps:{iconPosition:"right",variant:"tertiary"}},(({onClose:e})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(ka,{onCloseDropdownMenu:e}),(0,a.createElement)(r.Slot,{name:"SimpleHistorySlotEventsControlBarMenu",fillProps:{onClose:e,eventsQueryParams:t,eventsTotal:n}}))))}function Ca(e){const{eventsIsLoading:t,eventsTotal:n,eventsQueryParams:s}=e,i=t?(0,a.createElement)(r.__experimentalText,null,(0,a.createElement)(r.Spinner,null),(0,u._x)("Loading","Message visible while waiting for log to load from server the first time","simple-history")):null,o=n?(0,a.createElement)(r.__experimentalText,null,(0,u.sprintf)(/* translators: %s: number of events */ /* translators: %s: number of events */
(0,u._n)("%s event","%s events",n,"simple-history"),n)):null;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{style:{background:"white",padding:"6px 12px"}},(0,a.createElement)(r.Flex,{gap:2},(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.__experimentalHStack,{spacing:2},o,i)),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(Ma,{eventsQueryParams:s,eventsTotal:n})))))}function Ta(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Ta(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Na(){for(var e,t,n=0,a="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Ta(e))&&(a&&(a+=" "),a+=t);return a}const Pa=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})});function Aa(e){const t=e.initiator_data||{},n=t.user_display_name||t.user_login||"",a=t.user_email?`(${t.user_email})`:"";let r="";if(e.date_local){const t=new Date(e.date_local.replace(" ","T")),n=t.getFullYear(),a=t.toLocaleString("default",{month:"long"}),s=t.getDate(),i=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});r=`${n}-${String(t.getMonth()+1).padStart(2,"0")}-${String(s).padStart(2,"0")} (${a.toLowerCase()} ${s} ${n}) at ${i}`}const s=e.via?` Via ${e.via}`:"";return`${[n,a].filter(Boolean).join(" ")+(r?`  ${r}`:"")+(s?` ${s}`:"")}\n${e.message||""}`}function Oa({event:e}){const t=(0,u.__)("Copy event message","simple-history"),n=(0,u.__)("Event message copied","simple-history"),[s,i]=(0,o.useState)(t),l=Aa(e),c=(0,d.useCopyToClipboard)(l,(()=>{i(n),setTimeout((()=>{i(t)}),2e3)}));return(0,a.createElement)(r.MenuItem,{icon:Pa,ref:c},s)}function Da({event:e}){const t=(0,u.__)("Copy detailed event message","simple-history"),n=(0,u.__)("Event message copied","simple-history"),[s,i]=(0,o.useState)(t);let l="# Event Message\n\n";l+=Aa(e)+"\n\n";const c=function(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)return"";let t="\n\n| Key | Value |\n| --- | ----- |";for(const[n,a]of Object.entries(e))t+=`\n| ${n} | ${a} |`;return t}(e);c&&(l+="## Event Details Data\n",l+=c);const m=(0,d.useCopyToClipboard)(l,(()=>{i(n),setTimeout((()=>{i(t)}),2e3)}));return(0,a.createElement)(r.MenuItem,{icon:Pa,ref:m},s)}const La=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});function Za({event:e}){const t=e.permalink,n=(0,u.__)("Copy link to event details","simple-history"),s=(0,u.__)("Link copied to clipboard","simple-history"),[i,l]=(0,o.useState)(n),c=(0,d.useCopyToClipboard)(t,(()=>{l(s),setTimeout((()=>{l(n)}),2e3)}));return(0,a.createElement)(r.MenuItem,{icon:La,ref:c},i)}function ja({event:e,onClose:t}){return(0,a.createElement)(r.MenuItem,{icon:Pa,onClick:()=>{sa({event:e}),t()}},(0,u.__)("View event details","simple-history"))}const Ha=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z"})});function Fa({event:e,eventsAdminPageURL:t}){const n="wp_user"===e?.initiator&&e?.initiator_data?.user_id&&e?.initiator_data?.user_email,s=e?.logger&&e?.message_key;return(0,a.createElement)(a.Fragment,null,n?(0,a.createElement)(r.MenuItem,{icon:Ha,onClick:()=>{const n=JSON.stringify([{id:e.initiator_data.user_id,value:e.initiator_data.user_email}]),a=(0,m.addQueryArgs)(t,{users:n});window.location.href=a}},(0,u.__)("Find events by the same user","simple-history")):null,s?(0,a.createElement)(r.MenuItem,{icon:Ha,onClick:()=>{const n=JSON.stringify([{value:e.message_key,search_options:[`${e.logger}:${e.message_key}`]}]),a=(0,m.addQueryArgs)(t,{messages:n});window.location.href=a}},(0,u.__)("Filter event by this event type","simple-history")):null)}const Ra=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM7 9h10v6H7V9Z"})});function za({event:e,eventsAdminPageURL:t,userCanManageOptions:n}){return n&&e?.id?(0,a.createElement)(r.MenuItem,{icon:Ra,onClick:()=>{const n=(0,m.addQueryArgs)(t,{surrounding_event_id:e.id,surrounding_count:5});window.open(n,"_blank","noopener,noreferrer")}},(0,u.__)("Show surrounding events","simple-history")):null}const Ba=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"m21.5 9.1-6.6-6.6-4.2 5.6c-1.2-.1-2.4.1-3.6.7-.1 0-.1.1-.2.1-.5.3-.9.6-1.2.9l3.7 3.7-5.7 5.7v1.1h1.1l5.7-5.7 3.7 3.7c.4-.4.7-.8.9-1.2.1-.1.1-.2.2-.3.6-1.1.8-2.4.6-3.6l5.6-4.1zm-7.3 3.5.1.9c.1.9 0 1.8-.4 2.6l-6-6c.8-.4 1.7-.5 2.6-.4l.9.1L15 4.9 19.1 9l-4.9 3.6z"})});function Wa({event:e,onClose:t,hasPremiumAddOn:n}){const{showModal:s}=Ia();return n||e.sticky?null:(0,a.createElement)(r.MenuItem,{onClick:()=>{s((0,u.__)("Unlock Sticky Events","simple-history"),(0,u.__)("Pin important events to the top of your log. Great for keeping critical changes visible, like security incidents or major updates.","simple-history"),Ba,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMjAwIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YwZjBmMCIvPgogIDxyZWN0IHg9IjIwIiB5PSIyMCIgd2lkdGg9IjM2MCIgaGVpZ2h0PSIxNjAiIHJ4PSI4IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNkZGQiLz4KICA8dGV4dCB4PSI0MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSIjMzMzIj5TdGljayBldmVudCB0byB0b3A8L3RleHQ+CiAgPHJlY3QgeD0iNDAiIHk9IjY1IiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjQwIiByeD0iNCIgZmlsbD0iI2ZmZjhlMSIgc3Ryb2tlPSIjZmZjMTA3Ii8+CiAgPGNpcmNsZSBjeD0iNjAiIGN5PSI4NSIgcj0iMTAiIGZpbGw9IiNmZmMxMDciLz4KICA8cmVjdCB4PSI4MCIgeT0iNzUiIHdpZHRoPSIyNjAiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiNlMGUwZTAiLz4KICA8cmVjdCB4PSI4MCIgeT0iODgiIHdpZHRoPSIyMDAiIGhlaWdodD0iNiIgcng9IjIiIGZpbGw9IiNmMGYwZjAiLz4KICA8cmVjdCB4PSI0MCIgeT0iMTE1IiB3aWR0aD0iMzIwIiBoZWlnaHQ9IjMwIiByeD0iNCIgZmlsbD0iI2Y1ZjVmNSIgc3Ryb2tlPSIjZTBlMGUwIi8+CiAgPHJlY3QgeD0iNDAiIHk9IjE1MCIgd2lkdGg9IjMyMCIgaGVpZ2h0PSIyNSIgcng9IjQiIGZpbGw9IiNmNWY1ZjUiIHN0cm9rZT0iI2UwZTBlMCIvPgo8L3N2Zz4K"),t()},icon:Ba},(0,u.__)("Stick event to top","simple-history"))}function Ua({event:e,onClose:t,userCanManageOptions:n}){const[s,i]=(0,o.useState)(!1);return e.sticky&&n?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.MenuItem,{onClick:()=>{i(!0)},icon:Ba},(0,u.__)("Unstick event","simple-history")),s?(0,a.createElement)(r.__experimentalConfirmDialog,{cancelButtonText:(0,u.__)("Nope","simple-history"),confirmButtonText:(0,u.__)("Yes, unstick it","simple-history"),onConfirm:async()=>{try{await c()({path:`/simple-history/v1/events/${e.id}/unstick`,method:"POST"})}catch(e){}finally{t()}},onCancel:()=>i(!1)},(0,u.sprintf)(/* translators: %s: The message of the event. */ /* translators: %s: The message of the event. */
(0,u.__)('Unstick event "%s"?',"simple-history"),e.message)):null):null}function Va({event:e,eventVariant:t,eventsAdminPageURL:n,hasPremiumAddOn:s,userCanManageOptions:i}){return"modal"===t?null:(0,a.createElement)("div",{className:"SimpleHistoryLogitem__actions"},(0,a.createElement)(r.DropdownMenu,{label:(0,u.__)("Actions","simple-history"),icon:ua,popoverProps:{placement:"left-start",inline:!0}},(({onClose:o})=>(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(ja,{event:e,eventVariant:t,onClose:o}),(0,a.createElement)(Za,{event:e})),(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(Oa,{event:e}),(0,a.createElement)(Da,{event:e})),(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(Fa,{event:e,eventsAdminPageURL:n}),(0,a.createElement)(za,{event:e,eventsAdminPageURL:n,userCanManageOptions:i})),(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(Ua,{event:e,onClose:o,userCanManageOptions:i}),(0,a.createElement)(Wa,{event:e,onClose:o,hasPremiumAddOn:s})),(0,a.createElement)(r.MenuGroup,null,(0,a.createElement)(r.Slot,{name:"SimpleHistorySlotEventActionsMenu",fillProps:{onClose:o,event:e,eventVariant:t,userCanManageOptions:i}}))))))}function $a(e){const{event:t}=e,{details_html:n}=t;return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__details",dangerouslySetInnerHTML:{__html:n}})}const Ga=window.wp.date;function qa(e){const{children:t,className:n}=e,r=Na("SimpleHistoryLogitem__inlineDivided",n);return(0,a.createElement)(a.Fragment,null," ",(0,a.createElement)("span",{className:r},t))}function Ya(e){const{event:t,eventVariant:n}=e,s=(0,Ga.getSettings)(),i=s.formats.datetimeAbbreviated,l=s.formats.time,c=s.timezone.string,d=Intl.DateTimeFormat().resolvedOptions().timeZone,m=t.date_gmt+"+0000";let h;h=(0,Ga.date)("Y-m-d",m)===(0,Ga.date)("Y-m-d",void 0,"GMT")?(0,u.sprintf)(
// translators: %s is the time, like 8:36 pm.
// translators: %s is the time, like 8:36 pm.
(0,u.__)("Today %s","simple-history"),(0,Ga.dateI18n)(l,m,d)):(0,Ga.dateI18n)(i,m,d);const[p,g]=(0,o.useState)((()=>(0,Ga.humanTimeDiff)(t.date_local)));(0,o.useEffect)((()=>{const e=setInterval((()=>{g((0,Ga.humanTimeDiff)(t.date_local))}),1e3);return()=>{clearInterval(e)}}),[t.date_local]);const f=(0,a.createElement)(a.Fragment,null,(0,a.createElement)("table",null,(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,u.__)("Date","simple-history")),(0,a.createElement)("th",null,(0,u.__)("Description","simple-history")))),(0,a.createElement)("tbody",null,(0,a.createElement)("tr",null,(0,a.createElement)("td",null,t.date_gmt),(0,a.createElement)("td",null,(0,u.__)("GMT time","simple-history"))),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,t.date_local),(0,a.createElement)("td",null,(0,u.sprintf)(/* translators: 1: timezone string */ /* translators: 1: timezone string */
(0,u.__)("Website timezone (%1$s)","simple-history"),c))),c!==d&&(0,a.createElement)("tr",null,(0,a.createElement)("td",null,(0,Ga.dateI18n)("Y-m-d H:i:s",m,d)),(0,a.createElement)("td",null,(0,u.sprintf)(/* translators: 1: browser timezone */ /* translators: 1: browser timezone */
(0,u.__)("Browser local time (%1$s)","simple-history"),d)))))),y=(0,a.createElement)("time",{dateTime:t.date_gmt,className:"SimpleHistoryLogitem__when__liveRelative"},h," (",p,")");let _;return _="compact"===n?(0,a.createElement)("div",null,p):(0,a.createElement)(r.Tooltip,{text:f,delay:500},"modal"===n?(0,a.createElement)(r.__experimentalText,null,y):(0,a.createElement)(r.Button,{variant:"link",onClick:()=>{sa({event:t})}},y)),(0,a.createElement)(qa,{className:"SimpleHistoryLogitem__permalink SimpleHistoryLogitem__when"},_)}function Qa(e){const{event:t,eventVariant:n}=e,{initiator_data:s}=t;switch(t.initiator){case"wp_user":const e=s.user_display_name||s.user_login;let i;return i="compact"===n||"modal"===n?(0,a.createElement)("strong",null,e):(0,a.createElement)(r.Button,{href:s.user_profile_url,variant:"link"},(0,a.createElement)(a.Fragment,null,(0,a.createElement)("strong",null,e),"",(0,a.createElement)("span",null,"(",s.user_email,")"))),(0,a.createElement)(qa,null,i);case"web_user":return(0,a.createElement)(qa,null,(0,a.createElement)("strong",null,(0,u.__)("Anonymous web user","simple-history")));case"wp_cli":return(0,a.createElement)(qa,null,(0,a.createElement)("strong",null,(0,u.__)("WP-CLI","simple-history")));case"wp":return(0,a.createElement)(qa,null,(0,a.createElement)("strong",null,(0,u.__)("WordPress","simple-history")));case"other":return(0,a.createElement)(qa,null,(0,a.createElement)("strong",null,(0,u.__)("Other","simple-history")));default:return(0,a.createElement)(qa,null,"Unknown initiator: ",(0,a.createElement)("code",null,t.initiator))}}const Ka=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Ja=[{key:"hostname",label:(0,u.__)("Hostname:","simple-history")},{key:"org",label:(0,u.__)("Org:","simple-history")},{key:"city",label:(0,u.__)("City:","simple-history")},{key:"region",label:(0,u.__)("Region:","simple-history")},{key:"country",label:(0,u.__)("Country:","simple-history")},{key:"loc",label:(0,u.__)("Location:","simple-history")}];function Xa(e){const{header:t,ipAddress:n,mapsApiKey:s,hasPremiumAddOn:i}=e,[l,c]=(0,o.useState)(!1),[d,m]=(0,o.useState)(!1),[h,p]=(0,o.useState)(),g=`https://ipinfo.io/${n.replace(/\.x$/,".0")}`;(0,o.useEffect)((()=>{d&&async function(){const e=await fetch(g,{method:"GET",headers:{Accept:"application/json"}}),t=await e.json();p(t),m(!1)}()}),[d,n,g]);const f=(0,o.createInterpolateElement)((0,u.__)("That IP address does not seem like a public one. It is probably a <a>bogon ip address</a>.","simple-history"),{a:(0,a.createElement)(r.ExternalLink,{href:"https://ipinfo.io/bogon",target:"_blank",rel:"noopener noreferrer"})}),y=s&&!h?.bogon&&h?.loc?(0,a.createElement)("tr",null,(0,a.createElement)("td",{colSpan:2},(0,a.createElement)("a",{href:`https://www.google.com/maps/place/${h.loc}/@${h.loc},6z`,target:"_blank",rel:"noopener noreferrer"},(0,a.createElement)("img",{src:`https://maps.googleapis.com/maps/api/staticmap?center=${h.loc}&zoom=7&size=350x100&scale=2&sensor=false&key=${s}`,width:"350",height:"100",alt:"Google Map"})))):null,_=i?null:(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{style:{display:"grid",placeItems:"center",width:"100%",height:100,backgroundImage:'url("/wp-content/plugins/simple-history/assets/images/map-img-blur.jpg")',backgroundSize:"cover",padding:"1rem"}},(0,a.createElement)(r.__experimentalText,null,(0,o.createInterpolateElement)((0,u.__)("See the location of the IP address on a map with <a>Simple History Premium</a> add-on.","simple-history"),{a:(0,a.createElement)(r.ExternalLink,{href:oa("https://simple-history.com/add-ons/premium/#GoogleMaps","premium_events_ipaddress"),target:"_blank",rel:"noopener noreferrer"})})))),v=h?(0,a.createElement)(a.Fragment,null,_,(0,a.createElement)("table",{className:"SimpleHistoryIpInfoDropin__ipInfoTable"},(0,a.createElement)("tbody",null,y,(0,a.createElement)("tr",null,(0,a.createElement)("td",{className:"SimpleHistoryIpInfoDropin__ipInfoTable__key"},(0,u.__)("IP address:","simple-history")),(0,a.createElement)("td",null,n)),(0,a.createElement)("tr",null,(0,a.createElement)("td",{className:"SimpleHistoryIpInfoDropin__ipInfoTable__key"},(0,u.__)("Header:","simple-history")),(0,a.createElement)("td",null,(0,a.createElement)("code",null,t))),h.bogon?(0,a.createElement)("tr",null,(0,a.createElement)("td",{className:"SimpleHistoryIpInfoDropin__ipInfoTable__key"},(0,u.__)("Error:","simple-history")),(0,a.createElement)("td",null,f)):null,Ja.map((e=>{const{key:t,label:n}=e,r=h[t];return r?(0,a.createElement)("tr",{key:t},(0,a.createElement)("td",{className:"SimpleHistoryIpInfoDropin__ipInfoTable__key"},n),(0,a.createElement)("td",null,r)):null})))),(0,a.createElement)(r.__experimentalText,{align:"right",isBlock:!0,variant:"muted",style:{marginTop:10}},(0,o.createInterpolateElement)((0,u.__)("IP info provided by <a>ipinfo.io</a>","simple-history"),{a:(0,a.createElement)(r.ExternalLink,{href:"https://ipinfo.io/",target:"_blank",rel:"noopener noreferrer"})}))):null;return(0,a.createElement)(r.Button,{title:t,onClick:e=>{"BUTTON"!==e.target.nodeName||(l?c(!1):(c(!0),m(!0)))},variant:"link"},n,l?(0,a.createElement)(r.Popover,{noArrow:!1,offset:10,placement:"top",animate:!0,shift:!0},(0,a.createElement)("div",{style:{minWidth:350,minHeight:100,padding:10,overflow:"hidden"}},(0,a.createElement)(r.Flex,{align:"start"},(0,a.createElement)("div",null,d?(0,a.createElement)("p",null,(0,u.__)("Getting IP info","simple-history")):(0,a.createElement)(a.Fragment,null,v)),(0,a.createElement)(r.Button,{icon:Ka,onClick:()=>c(!1)})))):null)}function er(e){const{event:t,mapsApiKey:n,hasPremiumAddOn:r}=e,{ip_addresses:s}=t;if(!s)return null;const i=Object.keys(s).length;if(0===i)return null;const o=(0,u._n)("IP address:","IP addresses:",i,"simple-history"),l=[];let c=0;for(const[e,t]of Object.entries(s))l.push((0,a.createElement)(a.Fragment,null,(0,a.createElement)(Xa,{key:e,header:e,ipAddress:t,mapsApiKey:n,hasPremiumAddOn:r})," ",c<i-1?", ":"")),c++;return(0,a.createElement)(qa,null,o," ",l)}function tr(e){const{event:t}=e,{via:n}=t;return n?(0,a.createElement)(qa,null,n):null}function nr(e){const{event:t}=e;if(!t.backfilled)return null;const n=(0,u.__)("Backfilled entry","simple-history");return(0,a.createElement)(qa,{className:"SimpleHistoryLogitem__backfilledEvent"},n)}function ar(e){const{event:t,eventVariant:n,hasExtendedSettingsAddOn:r,hasPremiumAddOn:s,mapsApiKey:i,isSurroundingEventsMode:o}=e;return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__header"},o&&(0,a.createElement)("span",{className:"SimpleHistoryLogitem__eventId"},"#",t.id),(0,a.createElement)(Qa,{event:t,eventVariant:n}),(0,a.createElement)(Ya,{event:t,eventVariant:n}),(0,a.createElement)(er,{event:t,mapsApiKey:i,hasExtendedSettingsAddOn:r,hasPremiumAddOn:s}),(0,a.createElement)(tr,{event:t}),(0,a.createElement)(nr,{event:t}))}function rr(e){const{event:t}=e,{initiator_data:n}=t;return(0,a.createElement)("img",{className:"SimpleHistoryLogitem__senderImage",src:n.user_avatar_url,alt:""})}function sr(e){const{event:t}=e,{initiator_data:n}=t;return(0,a.createElement)("img",{className:"SimpleHistoryLogitem__senderImage",src:n.user_avatar_url,alt:""})}function ir(){return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__senderImage"})}function or(e){const{event:t}=e,{initiator:n}=t;switch(n){case"wp_user":return(0,a.createElement)(rr,{event:t});case"web_user":return(0,a.createElement)(sr,{event:t});case"wp_cli":case"wp":case"other":return(0,a.createElement)(ir,{event:t});default:return(0,a.createElement)("p",null,'Add image for initiator "',n,'"')}}function lr(e){const{occasions:t,isLoadingOccasions:n,subsequent_occasions_count:r,occasionsCountMaxReturn:s}=e,i=Na({SimpleHistoryLogitems:!0,SimpleHistoryLogitem__occasionsItems:!0,haveOccasionsAdded:!1===n});return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__occasionsItemsWrap",style:{marginTop:"1rem",marginLeft:"-4.5rem",marginRight:"-1.5rem"}},(0,a.createElement)("ul",{className:i},t.map((e=>(0,a.createElement)(yr,{key:e.id,event:e}))),r>s?(0,a.createElement)("li",{className:"SimpleHistoryLogitem SimpleHistoryLogitem--occasion SimpleHistoryLogitem--occasion-tooMany"},(0,a.createElement)("div",{className:"SimpleHistoryLogitem__firstcol"}),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__secondcol"},(0,a.createElement)("div",{className:"SimpleHistoryLogitem__text"},(0,u.__)("Sorry, but there are too many similar events to show.","simple-history")))):null))}function cr(e){const{event:t,hasExtendedSettingsAddOn:n,hasPremiumAddOn:s,eventsSettingsPageURL:i}=e;if("SimpleUserLogger"!==t.logger)return null;if("user_login_failed"!==t.message_key&&"user_unknown_login_failed"!==t.message_key)return null;const o=n||s?(0,a.createElement)("a",{href:`${i}&selected-sub-tab=failed-login-attempts`},(0,u.__)("Configure failed login attempts","simple-history")):(0,a.createElement)(r.ExternalLink,{href:oa("https://simple-history.com/add-ons/premium/#limit-number-of-failed-login-attempts","premium_events_loginlimit")},(0,u.__)("Limit logged login attempts (Premium)","simple-history"));return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__occasionsAddOns"},(0,a.createElement)("p",{className:"SimpleHistoryLogitem__occasionsAddOnsText"},o))}function dr(e){const{event:t,eventVariant:n,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,eventsSettingsPageURL:l}=e,{subsequent_occasions_count:d}=t,[h,p]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[y,_]=(0,o.useState)([]);if(1===d)return null;if("modal"===n)return null;const v=(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{className:"SimpleHistoryLogitem__occasions"},(0,a.createElement)(r.Button,{variant:"link",onClick:e=>{(async()=>{p(!0);const e={type:"occasions",logRowID:t.id,occasionsID:t.occasions_id,occasionsCount:d-1,occasionsCountMaxReturn:15,per_page:5,_fields:["id","date_local","date_gmt","message","message_html","details_data","details_html","loglevel","occasions_id","subsequent_occasions_count","initiator","initiator_data","ip_addresses","via"]},n=await c()({path:(0,m.addQueryArgs)("/simple-history/v1/events",e),parse:!1}),a=await n.json();_(a),p(!1),f(!0)})(),e.preventDefault()}},(0,u.sprintf)(/* translators: %s: number of similar events */ /* translators: %s: number of similar events */
(0,u._n)("+%1$s similar event","+%1$s similar events",d-1,"simple-history"),d-1)),(0,a.createElement)(cr,{event:t,eventsSettingsPageURL:l,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i})));return(0,a.createElement)("div",null,g||h?null:v,h?(0,a.createElement)("span",null,(0,u.__)("Loading","simple-history")):null,g?(0,a.createElement)(a.Fragment,null,(0,a.createElement)("span",null,(0,u.sprintf)(/* translators: %s: number of similar events */ /* translators: %s: number of similar events */
(0,u.__)("Showing %1$s more","simple-history"),d-1)),(0,a.createElement)(lr,{isLoadingOccasions:h,isShowingOccasions:g,occasions:y,subsequent_occasions_count:d,occasionsCountMaxReturn:15})):null)}const ur=(0,da.jsx)(ca.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,da.jsx)(ca.Path,{d:"M10.97 10.159a3.382 3.382 0 0 0-2.857.955l1.724 1.723-2.836 2.913L7 17h1.25l2.913-2.837 1.723 1.723a3.38 3.38 0 0 0 .606-.825c.33-.63.446-1.343.35-2.032L17 10.695 13.305 7l-2.334 3.159Z"})});function mr({event:e}){const t=Na("SimpleHistoryLogitem--logleveltag",`SimpleHistoryLogitem--logleveltag-${e.loglevel}`);return(0,a.createElement)("div",{className:"SimpleHistoryLogitem__text"},(0,a.createElement)(hr,{event:e}),(0,a.createElement)("span",{dangerouslySetInnerHTML:{__html:e.message_html}})," ",(0,a.createElement)("span",{className:t},e.loglevel))}function hr({event:e}){const t=Na("SimpleHistoryLogitem--sticky");return e.sticky?(0,a.createElement)(r.Tooltip,{text:(0,u.__)("Sticky","simple-history")},(0,a.createElement)("span",{className:t},(0,a.createElement)(r.VisuallyHidden,{as:"span"},(0,u.__)("Sticky","simple-history")),(0,a.createElement)(r.Icon,{icon:ur}))):null}function pr(e){if(!e)return"";if(e.sticky_appended)return"sticky";const t=new Date(e.date_local).toISOString().split("T")[0],n=(new Date).toISOString().split("T")[0],a=new Date((new Date).setDate((new Date).getDate()-1)).toISOString().split("T")[0];return t===n?"today":t===a?"yesterday":(0,Ga.dateI18n)((0,Ga.__experimentalGetSettings)().formats.date,e.date_local)}function gr({event:e}){return pr(e)}function fr({event:e,eventVariant:t,prevEvent:n,loopIndex:s}){if("modal"===t)return null;const i=function({event:e}){if(!e)return"";const t=pr(e);return"sticky"===t?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(r.Icon,{icon:ur}),(0,u.__)("Sticky","simple-history")):"today"===t?(0,u.__)("Today","simple-history"):"yesterday"===t?(0,u.__)("Yesterday","simple-history"):t}({event:e,loopIndex:s}),o=gr({event:e,loopIndex:s})!==gr({event:n,loopIndex:s-1}),l=Na({SimpleHistoryEventSeparator:!0,"SimpleHistoryEventSeparator--hasLabel":o});return(0,a.createElement)("div",{className:l},o?(0,a.createElement)("span",{className:"SimpleHistoryEventSeparator__label"},i):null)}function yr(e){const{event:t,variant:n="normal",mapsApiKey:r,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,isNewAfterFetchNewEvents:o,eventsSettingsPageURL:l,eventsAdminPageURL:c,userCanManageOptions:d,prevEvent:u,nextEvent:m,loopIndex:h,isCenterEvent:p,isSurroundingEventsMode:g}=e,f=Na("SimpleHistoryLogitem",`SimpleHistoryLogitem--variant-${n}`,`SimpleHistoryLogitem--loglevel-${t.loglevel}`,`SimpleHistoryLogitem--logger-${t.logger}`,`SimpleHistoryLogitem--initiator-${t.initiator}`,{"SimpleHistoryLogitem--is-sticky":t.sticky,"SimpleHistoryLogitem--newRowSinceReload":o,"SimpleHistoryLogitem--is-center-event":p});return(0,a.createElement)("li",{className:f},(0,a.createElement)(fr,{event:t,eventVariant:n,prevEvent:u,nextEvent:m,loopIndex:h}),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__firstcol"},(0,a.createElement)(or,{event:t})),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__secondcol"},(0,a.createElement)(ar,{event:t,eventVariant:n,mapsApiKey:r,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,isSurroundingEventsMode:g}),(0,a.createElement)(mr,{event:t,eventVariant:n}),(0,a.createElement)($a,{event:t,eventVariant:n}),(0,a.createElement)(dr,{event:t,eventVariant:n,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,eventsSettingsPageURL:l}),(0,a.createElement)(Va,{event:t,eventVariant:n,eventsAdminPageURL:c,hasPremiumAddOn:i,userCanManageOptions:d})))}function _r(e){const{events:t,prevEventsMaxId:n,mapsApiKey:r,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,eventsIsLoading:o,eventsSettingsPageURL:l,eventsAdminPageURL:c,userCanManageOptions:d,surroundingEventId:u}=e;if(!t||0===t.length)return null;const m=Boolean(u),h=Na({SimpleHistoryLogitems:!0,"is-loading":o,"is-loaded":!o});return(0,a.createElement)("ul",{className:h},t.map(((e,o)=>(0,a.createElement)(yr,{key:`${e.id}-${o}`,event:e,loopIndex:o,prevEvent:t[o-1],nextEvent:t[o+1],mapsApiKey:r,hasExtendedSettingsAddOn:s,hasPremiumAddOn:i,eventsSettingsPageURL:l,eventsAdminPageURL:c,userCanManageOptions:d,isNewAfterFetchNewEvents:e.id>n,isCenterEvent:e.id===u,isSurroundingEventsMode:m}))))}function vr(e){const{index:t}=e,n={backgroundColor:"var(--sh-color-gray-4)",width:ia(40,50)+"%",height:"1rem"},r={backgroundColor:"var(--sh-color-gray-4)",width:ia(55,75)+"%",height:"1.25rem"},s={backgroundColor:"var(--sh-color-gray-4)",width:ia(50,60)+"%",height:"3rem"};return(0,a.createElement)("li",{key:t,className:"SimpleHistoryLogitem SimpleHistoryLogitem--variant-normal SimpleHistoryLogitem--loglevel-debug SimpleHistoryLogitem--logger-WPHTTPRequestsLogger SimpleHistoryLogitem--initiator-wp_user"},(0,a.createElement)("div",{className:"SimpleHistoryLogitem__firstcol",style:{width:32,height:32,borderRadius:"50%",backgroundColor:"var(--sh-color-gray-4)"}}),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__secondcol"},(0,a.createElement)("div",{className:"SimpleHistoryLogitem__header",style:n}),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__text",style:r}),(0,a.createElement)("div",{className:"SimpleHistoryLogitem__details",style:s})))}function wr(e){var t;const{eventsIsLoading:n,events:r,pagerSize:s}=e;if(!n||r.length>0)return null;const i=null!==(t=s.page)&&void 0!==t?t:0;return(0,a.createElement)("div",null,(0,a.createElement)("ul",{className:"SimpleHistoryLogitems"},Array.from({length:i}).map(((e,t)=>(0,a.createElement)(vr,{key:t,index:t})))))}const xr=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})}),Er=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z"})}),br=(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368"},(0,a.createElement)("path",{d:"M250-250v-460h60v460h-60Zm430-3.85L453.85-480 680-706.15 722.15-664l-184 184 184 184L680-253.85Z"})),Sr=(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#5f6368"},(0,a.createElement)("path",{d:"M280-253.85 237.85-296l184-184-184-184L280-706.15 506.15-480 280-253.85ZM650-250v-460h60v460h-60Z"}));function Ir(e){const{page:t,totalPages:n,setPage:s}=e;if(!t||!n)return null;const i=[{label:(0,u.__)("","simple-history"),value:"custom"},...[...Array(n)].map(((e,t)=>({label:t+1,value:t+1})))];return(0,a.createElement)("div",null,(0,a.createElement)(r.__experimentalHStack,{spacing:4,justify:"center"},(0,a.createElement)(r.Button,{label:(0,u.__)("First page","simple-history"),size:"compact",onClick:()=>s(1),disabled:1===t,accessibleWhenDisabled:!0,icon:br}),(0,a.createElement)(r.Button,{label:(0,u.__)("Previous page","simple-history"),size:"compact",onClick:()=>s(t-1),disabled:1===t,accessibleWhenDisabled:!0,icon:xr}),(0,a.createElement)(r.__experimentalHStack,{justify:"flex-start",expanded:!1,spacing:2},(0,o.createInterpolateElement)((0,u.sprintf)(
// translators: %s: Total number of pages.
// translators: %s: Total number of pages.
(0,u._x)("Page <CurrentPageControl /> of %s","paging","simple-history"),n),{CurrentPageControl:(0,a.createElement)(r.SelectControl,{"aria-label":(0,u.__)("Current page","simple-history"),value:t,options:i,onChange:e=>{let t;t="custom"===e?prompt("Enter page number",1):e,t=parseInt(t,10),isNaN(t)||t<1?t=1:t>n&&(t=n),s(t)},size:"compact",__nextHasNoMarginBottom:!0})})),(0,a.createElement)(r.Button,{label:(0,u.__)("Next page","simple-history"),size:"compact",onClick:()=>s(t+1),disabled:t===n,accessibleWhenDisabled:!0,icon:Er}),(0,a.createElement)(r.Button,{label:(0,u.__)("Last page","simple-history"),size:"compact",onClick:()=>s(n),disabled:t===n,accessibleWhenDisabled:!0,icon:Sr})))}function kr(e){const{eventsLoadingHasErrors:t,eventsLoadingErrorDetails:n}=e;if(!t)return null;const s=oa("https://simple-history.com/support/load-events-error/","support_error_loadevents"),i=(0,m.addQueryArgs)(s,{error:JSON.stringify(n)});return(0,a.createElement)("div",{style:{margin:"1rem"}},(0,a.createElement)(r.Notice,{status:"warning",isDismissible:!1},(0,a.createElement)(r.__experimentalVStack,{spacing:2},(0,a.createElement)(r.__experimentalText,{as:"p"},(0,u.__)("There was an error loading the events.","simple-history")),(0,a.createElement)(r.__experimentalText,{as:"p"},(0,u.__)("This can often be resolved by refreshing your browser. If the problem persists, please try again later.","simple-history")),(0,a.createElement)(r.__experimentalText,{as:"p"},(0,a.createElement)(r.Button,{variant:"secondary",onClick:()=>window.location.reload()},(0,u.__)("Reload page","simple-history"))),(0,a.createElement)("details",null,(0,a.createElement)("summary",null,(0,u.__)("View error details","simple-history")),(0,a.createElement)(r.__experimentalText,{as:"pre",style:{padding:"1rem"}},JSON.stringify(n,null,2)),(0,a.createElement)(r.__experimentalText,{as:"p"},(0,a.createElement)(r.ExternalLink,{href:i},"Search for error and solutions online.")),(0,a.createElement)(r.__experimentalText,{variant:"muted",as:"p"},"Error above will be sent to simple-history.com. Make sure it don't contain any personal or sensitive information.")))))}function Mr(e){const{eventsIsLoading:t,events:n}=e;if(t)return null;if(n.length&&n.length>0)return null;const s=(0,a.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",fill:"#000000"},(0,a.createElement)("path",{d:"M280-80q-83 0-141.5-58.5T80-280q0-83 58.5-141.5T280-480q83 0 141.5 58.5T480-280q0 83-58.5 141.5T280-80Zm544-40L568-376q-12-13-25.5-26.5T516-428q38-24 61-64t23-88q0-75-52.5-127.5T420-760q-75 0-127.5 52.5T240-580q0 6 .5 11.5T242-557q-18 2-39.5 8T164-535q-2-11-3-22t-1-23q0-109 75.5-184.5T420-840q109 0 184.5 75.5T680-580q0 43-13.5 81.5T629-428l251 252-56 56Zm-615-61 71-71 70 71 29-28-71-71 71-71-28-28-71 71-71-71-28 28 71 71-71 71 28 28Z"})),i={fontSize:"1rem",fontWeight:"500",marginBlock:".25rem",color:"var(--sh-color-gray-2)"};return(0,a.createElement)("div",{style:{marginBlock:"2rem",display:"flex",flexDirection:"column",alignItems:"center"}},(0,a.createElement)(r.Icon,{icon:s,fill:"var(--sh-color-gray-2)",size:50,style:{marginBottom:"2rem"}}),(0,a.createElement)(r.__experimentalText,{as:"p",style:i},(0,u.__)("Your search did not match any history events.","simple-history")),(0,a.createElement)(r.__experimentalText,{as:"p",style:i},(0,u.__)("Try different search options or clear the search.","simple-history")))}function Cr(e){const{events:t,page:n,pagerSize:s,setPage:i,eventsIsLoading:o,eventsMeta:l,prevEventsMaxId:c,mapsApiKey:d,hasExtendedSettingsAddOn:m,hasPremiumAddOn:h,eventsSettingsPageURL:p,eventsAdminPageURL:g,eventsLoadingHasErrors:f,eventsLoadingErrorDetails:y,userCanManageOptions:_,surroundingEventId:v,surroundingCount:w}=e,x=l.totalPages,E=Boolean(v);return(0,a.createElement)("div",{style:{backgroundColor:"white",minHeight:"300px",display:"flex",flexDirection:"column",paddingTop:"30px"}},E&&(0,a.createElement)(r.Notice,{status:"info",isDismissible:!1},(0,u.sprintf)(/* translators: 1: event ID, 2: number of surrounding events */ /* translators: 1: event ID, 2: number of surrounding events */
(0,u.__)("Viewing #%1$d with %2$d surrounding events","simple-history"),v,w||5)),(0,a.createElement)(wr,{eventsIsLoading:o,pagerSize:s,events:t}),(0,a.createElement)(Mr,{eventsIsLoading:o,events:t}),(0,a.createElement)(kr,{eventsLoadingHasErrors:f,eventsLoadingErrorDetails:y}),(0,a.createElement)(_r,{eventsIsLoading:o,events:t,prevEventsMaxId:c,mapsApiKey:d,hasPremiumAddOn:h,hasExtendedSettingsAddOn:m,eventsSettingsPageURL:p,eventsAdminPageURL:g,userCanManageOptions:_,surroundingEventId:v}),(0,a.createElement)(r.__experimentalSpacer,{margin:4}),!E&&(0,a.createElement)(Ir,{page:n,totalPages:x,setPage:i}),(0,a.createElement)(r.__experimentalSpacer,{paddingBottom:4}))}function Tr(e){const{eventId:t,closeModal:n=null}=e,[s,i]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0),[h,p]=(0,o.useState)(null);return(0,o.useEffect)((()=>{(async()=>{try{d(!0);const e={_fields:["id","logger","occasions_id","subsequent_occasions_count","initiator_data","loglevel","message","message_html","message_key","details_data","details_html","message_uninterpolated","date_local","date_gmt","message","context","ip_addresses","details_data","via","initiator"]},n=await c()({path:(0,m.addQueryArgs)("/simple-history/v1/events/"+t,e),parse:!1}),a=await n.json();i(a)}catch(e){404===e.status?p((0,u.__)("Event not found.","simple-history")):p((0,u.__)("An error occurred while fetching the event.","simple-history"))}finally{d(!1)}})()}),[t]),(0,a.createElement)(r.Modal,{title:(0,u.__)("Event details","simple-history"),onRequestClose:n},(0,a.createElement)("div",{className:"SimpleHistory__modal"},l&&(0,a.createElement)("p",null,(0,u.__)("Loading detailed events data","simple-history")),!l&&h&&(0,a.createElement)("p",null,h),!l&&!h&&s&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(yr,{event:s,variant:"modal"}),(0,a.createElement)("p",null,(0,a.createElement)(r.__experimentalText,null,(0,u.__)("This is potentially useful information and meta data that a logger has saved.","simple-history"))),(0,a.createElement)("h2",null,(0,u.__)("Event details","simple-history")),(0,a.createElement)("table",{className:"SimpleHistoryLogitem__moreDetailsContext"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,u.__)("Key","simple-history")),(0,a.createElement)("th",null,(0,u.__)("Value","simple-history")))),(0,a.createElement)("tbody",null,(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"id"),(0,a.createElement)("td",null,s.id)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"logger"),(0,a.createElement)("td",null,s.logger)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"level"),(0,a.createElement)("td",null,s.loglevel)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"date_local"),(0,a.createElement)("td",null,s.date_local)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"date_gmt"),(0,a.createElement)("td",null,s.date_gmt)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"message"),(0,a.createElement)("td",null,s.message)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"message_uninterpolated"),(0,a.createElement)("td",null,s.message_uninterpolated)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"initiator"),(0,a.createElement)("td",null,s.initiator)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"occasions_id"),(0,a.createElement)("td",null,s.occasions_id)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"subsequent_occasions_count"),(0,a.createElement)("td",null,s.subsequent_occasions_count)),(0,a.createElement)("tr",null,(0,a.createElement)("td",null,"via"),(0,a.createElement)("td",null,s.via)))),(0,a.createElement)("h2",null,(0,u.__)("Event context","simple-history")),(0,a.createElement)("table",{className:"SimpleHistoryLogitem__moreDetailsContext"},(0,a.createElement)("thead",null,(0,a.createElement)("tr",null,(0,a.createElement)("th",null,(0,u.__)("Key","simple-history")),(0,a.createElement)("th",null,(0,u.__)("Value","simple-history")))),(0,a.createElement)("tbody",null,Object.entries(s.context||{}).map((([e,t])=>(0,a.createElement)("tr",{key:e},(0,a.createElement)("td",null,e),(0,a.createElement)("td",null,t)))))))))}function Nr(){const e=(()=>{const[e,t]=(0,o.useState)(window.location.hash),n=()=>{t(window.location.hash)};return(0,o.useEffect)((()=>(window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)})),[]),e})(),[t,n]=(0,o.useState)(!1),[r,s]=(0,o.useState)(null);(0,o.useEffect)((()=>{const t=e.match(/^#simple-history\/event\/(\d+)/);null!==t?(s(parseInt(t[1],10)),n(!0)):n(!1)}),[e]);return t?(0,a.createElement)(Tr,{eventId:r,closeModal:()=>{n(!1),window.location.hash=""}}):null}function Pr(e){const{dateOptions:t,selectedDateOption:n,setSelectedDateOption:s,searchText:i,setSearchText:l,selectedCustomDateFrom:c,setSelectedCustomDateFrom:d,selectedCustomDateTo:m,setSelectedCustomDateTo:h}=e,p=e=>e>new Date;return(0,o.useEffect)((()=>{c&&m&&c>m&&h(c)}),[c,m,h]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)("div",{style:{margin:"1em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Dates","simple-history")),(0,a.createElement)("div",{style:{display:"inline-block",width:"310px"}},(0,a.createElement)(r.SelectControl,{__nextHasNoMarginBottom:!0,options:t,value:n,onChange:e=>s(e)}))),"customRange"===n?(0,a.createElement)((function(){const e=(0,Ga.getSettings)().l10n.startOfWeek;return(0,a.createElement)(r.Flex,{justify:"start",gap:"15"},(0,a.createElement)(r.FlexItem,{style:{width:"95px"}}),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.BaseControl,{label:(0,u.__)("From date","simple-history")},(0,a.createElement)(r.DatePicker,{id:"simple-history-datepicker-from",startOfWeek:e,onChange:e=>{const t=new Date(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));d(n)},currentDate:c,isInvalidDate:p}))),(0,a.createElement)(r.FlexItem,null,(0,a.createElement)(r.BaseControl,{label:(0,u.__)("To date","simple-history")},(0,a.createElement)(r.DatePicker,{startOfWeek:e,onChange:e=>{const t=new Date(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));h(n)},currentDate:m,isInvalidDate:p}))))}),null):null,(0,a.createElement)("div",{style:{margin:"1em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Containing words","simple-history")),(0,a.createElement)("input",{type:"search",className:"SimpleHistoryFilterDropin-searchInput",value:i,onChange:e=>l(e.target.value)})))}function Ar(e){const{selectedLogLevels:t,setSelectedLogLevels:n,selectedMessageTypes:s,setSelectedMessageTypes:i,selectedUsersWithId:l,setSelectedUsersWithId:d,selectedInitiator:h,setSelectedInitiator:p,selectedContextFilters:g,setSelectedContextFilters:f,searchOptions:y,hideOwnEvents:_,setHideOwnEvents:v}=e,[w,x]=(0,o.useState)([]),[E,b]=(0,o.useState)([]),[S,I]=(0,o.useState)([]);(0,o.useEffect)((()=>{if(y?.initiators){const e=y.initiators.filter(Boolean).map((e=>({value:e.label,initiator_key:e.value,search_options:[e.label]})));I(e)}}),[y]);const k=ea.map((e=>e.label));return(0,o.useEffect)((()=>{if(!y?.loggers)return;const e=[];y.loggers.forEach((t=>{const n=t.search_data||{};n.search&&(e.push({value:n.search.label,search_options:n.search.options}),n?.search_all?.label&&e.push({value:na+n.search_all.label,search_options:n.search_all.options}),n?.search_options&&n.search_options.forEach((t=>{e.push({value:na+t.label,search_options:t.options})})))})),x(e)}),[y]),(0,a.createElement)("div",null,(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Log levels","simple-history"))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)("div",{className:"SimpleHistory__filters__loglevels__select",style:{width:"310px",backgroundColor:"white"}},(0,a.createElement)(r.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,placeholder:(0,u.__)("All log levels","simple-history"),onChange:e=>{n(e)},suggestions:k,value:t})))),(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Message types","simple-history"))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)("div",{className:"SimpleHistory__filters__loglevels__select",style:{width:"310px",backgroundColor:"white"}},(0,a.createElement)(r.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:"",placeholder:(0,u.__)("All message types","simple-history"),onChange:e=>{(e=>{e.map(((t,n)=>{if("string"==typeof t){const a=w.find((e=>e.value.trim()===t.trim()));a&&(e[n]=a)}return t})),i(e)})(e)},value:s.map((e=>(e.value=e.value.replace(na,""),e))),suggestions:w.map((e=>e.value)),__experimentalRenderItem:e=>e.item.startsWith(na)?e.item:(0,a.createElement)("strong",null,e.item)})))),(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Users","simple-history"))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)("div",{className:"SimpleHistory__filters__loglevels__select",style:{width:"310px",backgroundColor:"white"}},(0,a.createElement)(r.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:"",placeholder:(0,u.__)("All users","simple-history"),onChange:e=>{(e=>{e.map(((t,n)=>{if("string"==typeof t){const a=E.find((e=>e.value===t));a&&(e[n]=a)}return t})),d(e)})(e)},onInputChange:e=>{(async e=>{e.length<2||c()({path:(0,m.addQueryArgs)("/simple-history/v1/search-user",{q:e})}).then((e=>{const t=[];e.forEach((e=>{t.push({id:e.id,value:e.display_name+" ("+e.user_email+")"})})),b(t)}))})(e)},suggestions:E.map((e=>e.value)),value:l})),(0,a.createElement)(r.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,u.__)("Enter 2 or more characters to search for users.","simple-history")}))),(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"})),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)(r.CheckboxControl,{__nextHasNoMarginBottom:!0,label:(0,u.__)("Hide my own events","simple-history"),checked:_,onChange:v}))),(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Initiators","simple-history"))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)("div",{className:"SimpleHistory__filters__loglevels__select",style:{width:"310px",backgroundColor:"white"}},(0,a.createElement)(r.FormTokenField,{__experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:"",placeholder:(0,u.__)("All initiators","simple-history"),onChange:e=>{(e=>{e.map(((t,n)=>{if("string"==typeof t){const a=S.find((e=>e.value.trim()===t.trim()));a&&(e[n]=a)}return t})),p(e)})(e)},value:h,suggestions:S.map((e=>e.value)),help:(0,u.__)("Learn more about <a>what an initiator is</a>.","simple-history")})),(0,a.createElement)(r.ExternalLink,{href:oa("https://simple-history.com/support/what-is-an-initiator/","docs_filters_initiator"),target:"_blank",rel:"noopener noreferrer"},(0,u.__)("About initiators and how they work","simple-history")))),(0,a.createElement)(r.Flex,{align:"top",gap:"0",style:{margin:"0.5em 0"}},(0,a.createElement)(r.FlexItem,{style:{margin:".5em 0"}},(0,a.createElement)("div",{className:"SimpleHistory__filters__filterLabel"},(0,u.__)("Context","simple-history"))),(0,a.createElement)(r.FlexBlock,null,(0,a.createElement)("div",{className:"SimpleHistory__filters__loglevels__select",style:{width:"310px"}},(0,a.createElement)("textarea",{placeholder:(0,u.__)("_user_id:1","simple-history"),onChange:e=>{f(e.target.value)},value:g,rows:2,style:{width:"100%",fontFamily:"monospace",fontSize:"13px",padding:"6px 8px",borderRadius:"2px",border:"1px solid #8c8f94",boxSizing:"border-box",fieldSizing:"content"}})),(0,a.createElement)(r.BaseControl,{__nextHasNoMarginBottom:!0,help:(0,u.__)('Enter context key-value pairs in the format "key:value". One filter per line (e.g., "_user_id:1" on first line, "_sticky:1" on second line).',"simple-history")}))))}function Or(e){const{onReload:t,selectedLogLevels:n,setSelectedLogLevels:s,selectedMessageTypes:i,setSelectedMessageTypes:l,selectedDateOption:d,setSelectedDateOption:h,enteredSearchText:p,setEnteredSearchText:g,selectedCustomDateFrom:f,setSelectedCustomDateFrom:y,selectedCustomDateTo:_,setSelectedCustomDateTo:v,selectedUsersWithId:w,setSelectedUsersWithId:x,selectedInitiator:E,setSelectedInitiator:b,selectedContextFilters:S,setSelectedContextFilters:I,searchOptionsLoaded:k,setSearchOptionsLoaded:M,setPagerSize:C,setMapsApiKey:T,setHasExtendedSettingsAddOn:N,setHasPremiumAddOn:P,isExperimentalFeaturesEnabled:A,setIsExperimentalFeaturesEnabled:O,setEventsAdminPageURL:D,setEventsSettingsPageURL:L,setCurrentUserId:Z,setUserCanManageOptions:j,hideOwnEvents:H,setHideOwnEvents:F}=e,R=(0,o.useCallback)((()=>n.length>0||i.length>0||w.length>0||E.length>0||S.trim().length>0||H),[n,i,w,E,S,H]),[z,B]=(0,o.useState)((()=>R())),[W,U]=(0,o.useState)(null),V=null!==W?W:z,[$,G]=(0,o.useState)(Xn),[q,Y]=(0,o.useState)(null);(0,o.useEffect)((()=>{R()&&!z&&B(!0)}),[R,z]),(0,o.useEffect)((()=>{c()({path:(0,m.addQueryArgs)("/simple-history/v1/search-options",{})}).then((e=>{Y(e);const t=e.dates.result_months.map((e=>({label:(0,Ga.dateI18n)("F Y",e.yearMonth),value:`month:${e.yearMonth}`}))),n={label:(0,u.__)("All dates","simple-history"),value:"allDates"};G([...Jn,...t,n]),d||h(`lastdays:${e.dates.daysToShow}`),C(e.pager_size),T(e.maps_api_key),N(e.addons.has_extended_settings_add_on),P(e.addons.has_premium_add_on),O(e.experimental_features_enabled),D(e.events_admin_page_url),L(e.settings_page_url),e.current_user_id&&Z(e.current_user_id),e.current_user_can_manage_options&&j(e.current_user_can_manage_options),M(!0)}))}),[C,M,h,T,N,P,O,D,L,Z,j,d]);const Q=V?(0,u.__)("Collapse search options","simple-history"):(0,u.__)("Show search options","simple-history"),K=k?o.Fragment:r.Disabled;return(0,a.createElement)(K,null,(0,a.createElement)("div",{className:"SimpleHistory-filters"},(0,a.createElement)(Pr,{dateOptions:$,selectedDateOption:d,setSelectedDateOption:h,searchText:p,setSearchText:g,selectedCustomDateFrom:f,setSelectedCustomDateFrom:y,selectedCustomDateTo:_,setSelectedCustomDateTo:v}),V?(0,a.createElement)(Ar,{selectedLogLevels:n,setSelectedLogLevels:s,selectedMessageTypes:i,setSelectedMessageTypes:l,setSelectedUsersWithId:x,selectedUsersWithId:w,selectedInitiator:E,setSelectedInitiator:b,selectedContextFilters:S,setSelectedContextFilters:I,isExperimentalFeaturesEnabled:A,searchOptions:q,hideOwnEvents:H,setHideOwnEvents:F}):null,(0,a.createElement)("p",{className:"SimpleHistory__filters__filterSubmitWrap"},(0,a.createElement)(r.Button,{variant:"secondary",onClick:t},(0,u.__)("Search events","simple-history")),(0,a.createElement)(r.Button,{variant:"tertiary",onClick:()=>{U(!(null!==W?W:z))},className:"SimpleHistoryFilterDropin-showMoreFilters SimpleHistoryFilterDropin-showMoreFilters--first js-SimpleHistoryFilterDropin-showMoreFilters"},Q))))}const Dr=(0,da.jsx)(ca.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,da.jsx)(ca.Path,{d:"m11.3 17.2-5-5c-.1-.1-.1-.3 0-.4l2.3-2.3-1.1-1-2.3 2.3c-.7.7-.7 1.8 0 2.5l5 5H7.5v1.5h5.3v-5.2h-1.5v2.6zm7.5-6.4-5-5h2.7V4.2h-5.2v5.2h1.5V6.8l5 5c.1.1.1.3 0 .4l-2.3 2.3 1.1 1.1 2.3-2.3c.6-.7.6-1.9-.1-2.5z"})});function Lr(e){const{eventsQueryParams:t,eventsMaxId:n,eventsMaxDate:s,onReload:i}=e,[l,d]=(0,o.useState)(0),[h,p]=(0,o.useState)(!0);(0,o.useEffect)((()=>{if(!t||!n||!s)return;if(!h)return;const e=setInterval((async()=>{const e={...t,since_id:n,since_date:s,_fields:null};try{const t=await c()({path:(0,m.addQueryArgs)("/simple-history/v1/events/has-updates",e),parse:!1}),n=(await t.json()).new_events_count;n>0&&(n>=10?(d(10),p(!1)):d(n))}catch(e){console.error("Error when checking for new events:",e)}}),3e4);return()=>{clearInterval(e)}}),[t,n,s,h]);const g=!h&&l>=10,f=g?(0,u.sprintf)(
// translators: %d: maximum number of events shown before stopping polling
// translators: %d: maximum number of events shown before stopping polling
(0,u.__)("%d+ new events","simple-history"),10):(0,u.sprintf)(
// translators: %s: number of new events
// translators: %s: number of new events
(0,u._n)("%s new event","%s new events",l,"simple-history"),l);return(0,o.useEffect)((()=>{!function(e){let t=document.title;t=t.replace(/^\([\d!+]+\) /,""),e&&(t="("+e+") "+t),document.title=t}(g?"10+":l)}),[g,l]),(0,a.createElement)("div",{className:Na({SimpleHistoryDropin__NewRowsNotifier:!0,"SimpleHistoryDropin__NewRowsNotifier--haveNewRows":l>0})},(0,a.createElement)(r.Button,{icon:Dr,onClick:()=>{i(),d(0),p(!0)},label:(0,u.__)("Click to load new events","simple-history"),showTooltip:!0,variant:"tertiary",style:{width:"100%",justifyContent:"center"}},f))}const Zr=on.array(on.object({id:on.string(),value:on.string()})),jr=on.array(on.object({value:on.string(),search_options:on.array(on.string())})),Hr=on.array(on.object({value:on.string(),initiator_key:on.string().optional(),search_options:on.array(on.string())})),Fr=function(){const[e,t]=(0,o.useState)(!0),[n,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)({errorCode:void 0,errorMessage:void 0}),[l,h]=(0,o.useState)([]),[p,g]=(0,o.useState)({}),[f,y]=(0,o.useState)(Date.now()),[_,v]=(0,o.useState)(),[w,x]=(0,o.useState)(),[E,b]=(0,o.useState)(),[S,I]=(0,o.useState)(!1),[k,M]=(0,o.useState)(1),[C,P]=(0,o.useState)({}),[L,Z]=(0,o.useState)(""),[j,F]=(0,o.useState)(!1),[R,z]=(0,o.useState)(!1),[B,W]=(0,o.useState)(!1),[U,V]=(0,o.useState)(),[$,G]=(0,o.useState)(),[q,Y]=(0,o.useState)(null),[Q,K]=(0,o.useState)(!1),J="dashboard"===window.pagenow,X={throttleMs:J?1/0:50},[ee,te]=H("date",T.withDefault("").withOptions(X)),[ne,ae]=H("from",A.withDefault(aa).withOptions(X)),[re,se]=H("to",A.withDefault(ra).withOptions(X)),[ie,oe]=H("q",T.withDefault("").withOptions(X)),le=(0,o.useMemo)((()=>[]),[]),[ce,de]=H("levels",D(T).withDefault(le).withOptions(X)),[ue,me]=H("messages",O(jr.parse).withDefault(le).withOptions(X)),[he,pe]=H("users",O(Zr.parse).withDefault(le).withOptions(X)),[ge,fe]=H("initiator",O(Hr.parse).withDefault(le).withOptions(X)),[ye,_e]=H("context",T.withDefault("").withOptions(X)),[ve]=H("exclude-search",T.withDefault("").withOptions(X)),[we]=H("exclude-levels",D(T).withDefault(le).withOptions(X)),[xe]=H("exclude-loggers",D(T).withDefault(le).withOptions(X)),[Ee]=H("exclude-messages",O(jr.parse).withDefault(le).withOptions(X)),[be,Se]=H("exclude-users",O(Zr.parse).withDefault(le).withOptions(X)),[Ie]=H("exclude-initiator",O(Hr.parse).withDefault(le).withOptions(X)),[ke]=H("exclude-context",T.withDefault("").withOptions(X)),[Me]=H("surrounding_event_id",N.withOptions(X)),[Ce]=H("surrounding_count",N.withOptions(X)),Te=(0,o.useMemo)((()=>!!q&&be.some((e=>String(e.id)===String(q)))),[be,q]),Ne=(0,o.useCallback)((e=>{q&&(e?be.some((e=>String(e.id)===String(q)))||Se([...be,{id:String(q),value:"Me"}]):Se(be.filter((e=>String(e.id)!==String(q)))))}),[q,be,Se]),Pe=(0,o.useMemo)((()=>function(e){const{selectedLogLevels:t,selectedMessageTypes:n,selectedUsersWithId:a,selectedInitiator:r,selectedContextFilters:s,enteredSearchText:i,selectedDateOption:o,selectedCustomDateFrom:l,selectedCustomDateTo:c,page:d,pagerSize:u,excludeSearch:m,excludeLogLevels:h,excludeLoggers:p,excludeMessages:g,excludeUsers:f,excludeInitiator:y,excludeContextFilters:_,surroundingEventId:v,surroundingCount:w}=e;if(v){const e={surrounding_event_id:v,_fields:["id","logger","date_local","date_gmt","message","message_html","message_key","details_data","details_html","loglevel","occasions_id","subsequent_occasions_count","initiator","initiator_data","ip_addresses","via","permalink","sticky","sticky_appended","backfilled"]};return w&&(e.surrounding_count=w),e}let x=u.page;"dashboard"===window.pagenow&&(x=u.dashboard);const E={page:d,per_page:x,_fields:["id","logger","date_local","date_gmt","message","message_html","message_key","details_data","details_html","loglevel","occasions_id","subsequent_occasions_count","initiator","initiator_data","ip_addresses","via","permalink","sticky","sticky_appended","backfilled"]};if(i&&(E.search=i),o&&("customRange"===o?(E.date_from=Qn(l,"yyyy-MM-dd"),E.date_to=Qn(c,"yyyy-MM-dd")):E.dates=o),t.length){const e=[];t.forEach((t=>{const n=ea.find((e=>e.label===t));n&&e.push(n.value)})),e.length&&(E.loglevels=e)}if(n.length){const e=[];n.forEach((t=>{t.search_options.forEach((t=>{e.push(t)}))})),E.messages=e.join(",")}if(a.length){const e=a.map((e=>e.id));E.users=e}if(r.length>0){const e=r.map((e=>e.initiator_key||e.value));E.initiator=e}if(s&&s.trim().length>0){const e={};s.split("\n").map((e=>e.trim())).filter((e=>e.length>0)).forEach((t=>{const n=t.indexOf(":");if(n>0){const a=t.substring(0,n).trim(),r=t.substring(n+1).trim();a&&r&&(e[a]=r)}})),Object.keys(e).length>0&&(E.context_filters=e)}if(m&&m.trim().length>0&&(E.exclude_search=m),h&&h.length>0&&(E.exclude_loglevels=h),p&&p.length>0&&(E.exclude_loggers=p),g&&g.length>0){const e=g.map((e=>`${e.logger_slug}:${e.message}`));E.exclude_messages=e}if(f&&f.length>0){const e=f.map((e=>parseInt(e.id,10)));E.exclude_users=e}if(y&&y.length>0){const e=y.map((e=>e.initiator_key||e.value));E.exclude_initiator=e}if(_&&_.trim().length>0){const e={};_.split("\n").map((e=>e.trim())).filter((e=>e.length>0)).forEach((t=>{const n=t.indexOf(":");if(n>0){const a=t.substring(0,n).trim(),r=t.substring(n+1).trim();a&&r&&(e[a]=r)}})),Object.keys(e).length>0&&(E.exclude_context_filters=e)}const b=i||t.length||n.length||a.length||r.length>0||s&&s.trim().length>0||m&&m.trim().length>0||h&&h.length>0||p&&p.length>0||g&&g.length>0||f&&f.length>0||y&&y.length>0||_&&_.trim().length>0;return 1!==d||b||(E.include_sticky=!0),E}({selectedLogLevels:ce,selectedMessageTypes:ue,selectedUsersWithId:he,selectedInitiator:ge,selectedContextFilters:ye,enteredSearchText:ie,selectedDateOption:ee,selectedCustomDateFrom:ne,selectedCustomDateTo:re,page:k,pagerSize:C,excludeSearch:ve,excludeLogLevels:we,excludeLoggers:xe,excludeMessages:Ee,excludeUsers:be,excludeInitiator:Ie,excludeContextFilters:ke,surroundingEventId:Me,surroundingCount:Ce})),[ee,ie,ce,ue,he,ge,ye,ne,re,k,C,ve,we,xe,Ee,be,Ie,ke,Me,Ce]);(0,o.useEffect)((()=>{M(1)}),[ee,ie,ce,ue,ge,ye,ne,re,be]);const Ae=(0,o.useCallback)((async()=>{t(!0);try{const e=await c()({path:(0,m.addQueryArgs)("/simple-history/v1/events",Pe),parse:!1}),t=await e.json();if(g({total:parseInt(e.headers.get("X-Wp-Total"),10),totalPages:parseInt(e.headers.get("X-Wp-Totalpages"),10),link:e.headers.get("Link")}),t&&t.length&&1===k){const t=e.headers.get("X-SimpleHistory-MaxId"),n=e.headers.get("X-SimpleHistory-MaxDate");t&&v(parseInt(t,10)),n&&x(n)}h(t)}catch(e){r(!0);const t={code:null,statusText:null,bodyJson:null,bodyText:null};if(e.headers&&e.status&&e.statusText){const n=e.headers.get("Content-Type");t.code=e.status,t.statusText=e.statusText,n&&n.includes("application/json")?t.bodyJson=await e.json():t.bodyText=await e.text()}else t.bodyText=(0,u.__)("Unknown error","simple-history");i(t)}finally{t(!1)}}),[Pe,k]),Oe=(0,d.useDebounce)(Ae,500);(0,o.useEffect)((()=>{(S||Me)&&Oe()}),[Oe,S,f,Me]);const De=()=>{M(1),b(_),y(Date.now())};return(0,o.useEffect)((()=>{window.scrollTo({top:0,behavior:"smooth"})}),[k]),(0,o.useEffect)((()=>{const e=e=>{const{date:t}=e.detail,n=new Date(t+"T00:00:00Z");te("customRange"),ae(n),se(n)};return window.addEventListener("SimpleHistory:chartDateClick",e),()=>{window.removeEventListener("SimpleHistory:chartDateClick",e)}}),[te,ae,se]),(0,a.createElement)(a.Fragment,null,!Me&&(0,a.createElement)(Or,{selectedLogLevels:ce,setSelectedLogLevels:de,selectedMessageTypes:ue,setSelectedMessageTypes:me,selectedDateOption:ee,setSelectedDateOption:te,enteredSearchText:ie,setEnteredSearchText:oe,selectedCustomDateFrom:ne,setSelectedCustomDateFrom:ae,selectedCustomDateTo:re,setSelectedCustomDateTo:se,selectedUsersWithId:he,setSelectedUsersWithId:pe,selectedInitiator:ge,setSelectedInitiator:fe,selectedContextFilters:ye,setSelectedContextFilters:_e,searchOptionsLoaded:S,setSearchOptionsLoaded:I,setPagerSize:P,setMapsApiKey:Z,setHasExtendedSettingsAddOn:F,setHasPremiumAddOn:z,isExperimentalFeaturesEnabled:B,setIsExperimentalFeaturesEnabled:W,eventsAdminPageURL:U,setEventsAdminPageURL:V,setEventsSettingsPageURL:G,setPage:M,onReload:De,setCurrentUserId:Y,setUserCanManageOptions:K,hideOwnEvents:Te,setHideOwnEvents:Ne}),!Me&&(0,a.createElement)(Ca,{isExperimentalFeaturesEnabled:B,eventsIsLoading:e,eventsTotal:p.total,eventsQueryParams:Pe}),!Me&&(0,a.createElement)(Lr,{eventsQueryParams:Pe,eventsMaxId:_,eventsMaxDate:w,onReload:De}),(0,a.createElement)(Cr,{eventsIsLoading:e,events:l,eventsMeta:p,page:k,pagerSize:C,setPage:M,eventsMaxId:_,prevEventsMaxId:E,mapsApiKey:L,hasExtendedSettingsAddOn:j,hasPremiumAddOn:R,eventsSettingsPageURL:$,eventsAdminPageURL:U,eventsLoadingHasErrors:n,eventsLoadingErrorDetails:s,userCanManageOptions:Q,surroundingEventId:Me,surroundingCount:Ce}),J?(0,a.createElement)(la,null):null,(0,a.createElement)(Nr,null))};var Rr,zr=M(),Br=(0,a.createContext)({fullPageNavigationOnShallowFalseUpdates:!1}),Wr=(Rr=function(){const{fullPageNavigationOnShallowFalseUpdates:e}=(0,a.useContext)(Br),[t,n]=(0,a.useState)((()=>"undefined"==typeof location?new URLSearchParams:new URLSearchParams(location.search)));(0,a.useEffect)((()=>{const e=()=>{n(new URLSearchParams(location.search))};return zr.on("update",n),window.addEventListener("popstate",e),()=>{zr.off("update",n),window.removeEventListener("popstate",e)}}),[]);return{searchParams:t,updateUrl:(0,a.useMemo)((()=>function(e){return function(t,n){const a=new URL(location.href);a.search=function(e){if(0===e.size)return"";const t=[];for(const[a,r]of e.entries()){const e=a.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${n=r,n.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,(e=>encodeURIComponent(e)))}`)}var n;return"?"+t.join("&")}(t),e&&!1===n.shallow?("push"===n.history?location.assign:location.replace).call(location,a):("push"===n.history?history.pushState:history.replaceState).call(history,history.state,"",a),zr.emit("update",t),!0===n.scroll&&window.scrollTo({top:0})}}(e)),[e])}},({children:e,...t})=>(0,a.createElement)(y.Provider,{...t,value:{useAdapter:Rr}},e));function Ur({children:e,fullPageNavigationOnShallowFalseUpdates:t=!1}){return(0,a.createElement)(Br.Provider,{value:{fullPageNavigationOnShallowFalseUpdates:t}},(0,a.createElement)(Wr,null,e))}const Vr=(0,r.withFilters)("SimpleHistory.FilteredComponent")((e=>(0,a.createElement)(a.Fragment,null)));i()((()=>{const e=document.getElementById("simple-history-react-root");e&&o.createRoot&&(0,o.createRoot)(e).render((0,a.createElement)(Ur,null,(0,a.createElement)(Sa,null,(0,a.createElement)(r.SlotFillProvider,null,(0,a.createElement)(Vr,null),(0,a.createElement)(Fr,null)))))}))})();